{"version":3,"sources":["../node_modules/redux-undo/lib/actions.js","../node_modules/redux-undo/lib/helpers.js","../node_modules/redux-undo/lib/debug.js","../../../src/hooks/useCurrentNodeWithPlugin.ts","../node_modules/redux-undo/lib/index.js","../node_modules/redux-undo/lib/reducer.js","../../../src/hooks/useRemovePlugin.ts","../../../src/hooks/useAddPlugin.ts","../../../src/utils/getCurrentData.ts","../../../src/core/const.ts","../../../../src/core/utils/createId.ts","../../../../src/core/actions/helpers.ts","../../../../../src/core/actions/cell/core.ts","../../../../src/core/utils/getAvailablePlugins.ts","../../../../src/core/utils/getCellData.ts","../../../../src/core/utils/removeUndefinedProps.ts","../../../../src/core/actions/display.ts","../../../../../src/core/actions/cell/insert.ts","../../../../src/core/actions/value.ts","../../../../src/core/types/node.ts","../../../../../../src/core/reducer/value/helper/empty.ts","../../../../../../src/core/reducer/value/helper/optimize.ts","../../../../../../src/core/reducer/value/helper/setAllSizesAndOptimize.ts","../../../../../../src/core/reducer/value/helper/sizing.ts","../../../../../src/core/reducer/value/tree.ts","../../../../../src/core/reducer/values/index.ts","../../../../../src/core/reducer/value/index.ts","../../../../../src/core/actions/cell/drag.ts","../../../../src/core/actions/setting.ts","../../../../src/core/reducer/index.ts","../../../../../src/core/reducer/display/index.ts","../../../../../src/core/reducer/focus/index.ts","../../../../../src/core/reducer/settings/index.ts","../../../../../src/core/reducer/hover/index.ts","../../../../../src/core/selector/editable/index.ts","../../../src/core/EditorStore.ts","../../../src/core/store.ts","../../../src/core/reduxConnect.tsx","../../../../../src/core/components/hooks/options.ts"],"names":["Object","defineProperty","exports","value","ActionCreators","ActionTypes","UNDO","REDO","JUMP_TO_FUTURE","JUMP_TO_PAST","JUMP","CLEAR_HISTORY","undo","type","redo","jumpToFuture","index","jumpToPast","jump","clearHistory","parseActions","rawActions","defaultValue","arguments","length","undefined","Array","isArray","isHistory","history","present","future","past","includeAction","actions","action","indexOf","excludeAction","combineFilters","_len","filters","_key","reduce","prev","curr","currentState","previousHistory","groupByActionTypes","newHistory","group","_latestUnfiltered","limit","_toConsumableArray","arr","i","arr2","_arrayWithoutHoles","iter","Symbol","iterator","prototype","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","__DEBUG__","displayBuffer","set","debug","start","state","header","next","msgs","console","colorFormat","colors","end","nextState","_displayBuffer","_console","_console2","_console3","_console4","_console5","groupCollapsed","apply","log","groupEnd","_console6","_console7","_console8","_console9","_console10","printBuffer","args","concat","text","color","obj","plugin","pluginType","enumerable","get","_actions","_helpers","_reducer","require","__esModule","_typeof","constructor","reducer","rawConfig","initialState","config","_objectSpread","filter","groupBy","undoType","redoType","jumpToPastType","jumpToFutureType","jumpType","neverSkipReducer","ignoreInitialState","syncFilter","initTypes","clearHistoryType","skipReducer","res","slices","_len2","_key2","createHistoryAction","createHistory","actionTypeAmongClearHistoryType","some","actionType","filtered","filteredState","groupedState","insert","cache","_getRequireWildcardCache","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","desc","_interopRequireWildcard","WeakMap","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","push","target","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","lengthWithoutFuture","isHistoryOverflow","pastSliced","slice","newPast","newPresent","newFuture","n","dataI18n","_a","PositionEnum","rows","mode","referenceNodeId","t"],"mappings":"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","file":"static/js/6.f96159d4.chunk.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ActionCreators = exports.ActionTypes = void 0;\nvar ActionTypes = {\n  UNDO: '@@redux-undo/UNDO',\n  REDO: '@@redux-undo/REDO',\n  JUMP_TO_FUTURE: '@@redux-undo/JUMP_TO_FUTURE',\n  JUMP_TO_PAST: '@@redux-undo/JUMP_TO_PAST',\n  JUMP: '@@redux-undo/JUMP',\n  CLEAR_HISTORY: '@@redux-undo/CLEAR_HISTORY'\n};\nexports.ActionTypes = ActionTypes;\nvar ActionCreators = {\n  undo: function undo() {\n    return {\n      type: ActionTypes.UNDO\n    };\n  },\n  redo: function redo() {\n    return {\n      type: ActionTypes.REDO\n    };\n  },\n  jumpToFuture: function jumpToFuture(index) {\n    return {\n      type: ActionTypes.JUMP_TO_FUTURE,\n      index: index\n    };\n  },\n  jumpToPast: function jumpToPast(index) {\n    return {\n      type: ActionTypes.JUMP_TO_PAST,\n      index: index\n    };\n  },\n  jump: function jump(index) {\n    return {\n      type: ActionTypes.JUMP,\n      index: index\n    };\n  },\n  clearHistory: function clearHistory() {\n    return {\n      type: ActionTypes.CLEAR_HISTORY\n    };\n  }\n};\nexports.ActionCreators = ActionCreators;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseActions = parseActions;\nexports.isHistory = isHistory;\nexports.includeAction = includeAction;\nexports.excludeAction = excludeAction;\nexports.combineFilters = combineFilters;\nexports.groupByActionTypes = groupByActionTypes;\nexports.newHistory = newHistory;\n\n// parseActions helper: takes a string (or array)\n//                      and makes it an array if it isn't yet\nfunction parseActions(rawActions) {\n  var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (Array.isArray(rawActions)) {\n    return rawActions;\n  } else if (typeof rawActions === 'string') {\n    return [rawActions];\n  }\n\n  return defaultValue;\n} // isHistory helper: check for a valid history object\n\n\nfunction isHistory(history) {\n  return typeof history.present !== 'undefined' && typeof history.future !== 'undefined' && typeof history.past !== 'undefined' && Array.isArray(history.future) && Array.isArray(history.past);\n} // includeAction helper: whitelist actions to be added to the history\n\n\nfunction includeAction(rawActions) {\n  var actions = parseActions(rawActions);\n  return function (action) {\n    return actions.indexOf(action.type) >= 0;\n  };\n} // excludeAction helper: blacklist actions from being added to the history\n\n\nfunction excludeAction(rawActions) {\n  var actions = parseActions(rawActions);\n  return function (action) {\n    return actions.indexOf(action.type) < 0;\n  };\n} // combineFilters helper: combine multiple filters to one\n\n\nfunction combineFilters() {\n  for (var _len = arguments.length, filters = new Array(_len), _key = 0; _key < _len; _key++) {\n    filters[_key] = arguments[_key];\n  }\n\n  return filters.reduce(function (prev, curr) {\n    return function (action, currentState, previousHistory) {\n      return prev(action, currentState, previousHistory) && curr(action, currentState, previousHistory);\n    };\n  }, function () {\n    return true;\n  });\n}\n\nfunction groupByActionTypes(rawActions) {\n  var actions = parseActions(rawActions);\n  return function (action) {\n    return actions.indexOf(action.type) >= 0 ? action.type : null;\n  };\n}\n\nfunction newHistory(past, present, future) {\n  var group = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  return {\n    past: past,\n    present: present,\n    future: future,\n    group: group,\n    _latestUnfiltered: present,\n    index: past.length,\n    limit: past.length + future.length + 1\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.set = set;\nexports.start = start;\nexports.end = end;\nexports.log = log;\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nvar __DEBUG__;\n\nvar displayBuffer;\nvar colors = {\n  prevState: '#9E9E9E',\n  action: '#03A9F4',\n  nextState: '#4CAF50'\n};\n/* istanbul ignore next: debug messaging is not tested */\n\nfunction initBuffer() {\n  displayBuffer = {\n    header: [],\n    prev: [],\n    action: [],\n    next: [],\n    msgs: []\n  };\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction printBuffer() {\n  var _displayBuffer = displayBuffer,\n      header = _displayBuffer.header,\n      prev = _displayBuffer.prev,\n      next = _displayBuffer.next,\n      action = _displayBuffer.action,\n      msgs = _displayBuffer.msgs;\n\n  if (console.group) {\n    var _console, _console2, _console3, _console4, _console5;\n\n    (_console = console).groupCollapsed.apply(_console, _toConsumableArray(header));\n\n    (_console2 = console).log.apply(_console2, _toConsumableArray(prev));\n\n    (_console3 = console).log.apply(_console3, _toConsumableArray(action));\n\n    (_console4 = console).log.apply(_console4, _toConsumableArray(next));\n\n    (_console5 = console).log.apply(_console5, _toConsumableArray(msgs));\n\n    console.groupEnd();\n  } else {\n    var _console6, _console7, _console8, _console9, _console10;\n\n    (_console6 = console).log.apply(_console6, _toConsumableArray(header));\n\n    (_console7 = console).log.apply(_console7, _toConsumableArray(prev));\n\n    (_console8 = console).log.apply(_console8, _toConsumableArray(action));\n\n    (_console9 = console).log.apply(_console9, _toConsumableArray(next));\n\n    (_console10 = console).log.apply(_console10, _toConsumableArray(msgs));\n  }\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction colorFormat(text, color, obj) {\n  return [\"%c\".concat(text), \"color: \".concat(color, \"; font-weight: bold\"), obj];\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction start(action, state) {\n  initBuffer();\n\n  if (__DEBUG__) {\n    if (console.group) {\n      displayBuffer.header = ['%credux-undo', 'font-style: italic', 'action', action.type];\n      displayBuffer.action = colorFormat('action', colors.action, action);\n      displayBuffer.prev = colorFormat('prev history', colors.prevState, state);\n    } else {\n      displayBuffer.header = ['redux-undo action', action.type];\n      displayBuffer.action = ['action', action];\n      displayBuffer.prev = ['prev history', state];\n    }\n  }\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction end(nextState) {\n  if (__DEBUG__) {\n    if (console.group) {\n      displayBuffer.next = colorFormat('next history', colors.nextState, nextState);\n    } else {\n      displayBuffer.next = ['next history', nextState];\n    }\n\n    printBuffer();\n  }\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction log() {\n  if (__DEBUG__) {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    displayBuffer.msgs = displayBuffer.msgs.concat([].concat(args, ['\\n']));\n  }\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction set(debug) {\n  __DEBUG__ = debug;\n}","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { Editor } from 'slate';\nimport { useSlate } from 'slate-react';\nexport var getCurrentNodeWithPlugin = function (editor, plugin) {\n    if (plugin.pluginType === 'custom') {\n        return null;\n    }\n    var match = plugin.pluginType === 'component'\n        ? plugin.object === 'mark'\n            ? function (elem) { return Boolean(elem[plugin.type]); }\n            : function (elem) { return elem.type === plugin.type; }\n        : plugin.pluginType === 'data'\n            ? // search for data\n                function (_a) {\n                    var data = _a.data;\n                    var matches = plugin.dataMatches(data);\n                    return matches;\n                }\n            : null;\n    try {\n        var _a = __read(Editor.nodes(editor, {\n            match: match,\n            mode: 'lowest',\n        }), 1), matchingNode = _a[0];\n        return matchingNode;\n    }\n    catch (e) {\n        // seems to crash sometimes on redu\n        return null;\n    }\n};\nexport default (function (plugin) {\n    var editor = useSlate();\n    return getCurrentNodeWithPlugin(editor, plugin);\n});\n//# sourceMappingURL=useCurrentNodeWithPlugin.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"ActionTypes\", {\n  enumerable: true,\n  get: function get() {\n    return _actions.ActionTypes;\n  }\n});\nObject.defineProperty(exports, \"ActionCreators\", {\n  enumerable: true,\n  get: function get() {\n    return _actions.ActionCreators;\n  }\n});\nObject.defineProperty(exports, \"parseActions\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.parseActions;\n  }\n});\nObject.defineProperty(exports, \"isHistory\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.isHistory;\n  }\n});\nObject.defineProperty(exports, \"includeAction\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.includeAction;\n  }\n});\nObject.defineProperty(exports, \"excludeAction\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.excludeAction;\n  }\n});\nObject.defineProperty(exports, \"combineFilters\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.combineFilters;\n  }\n});\nObject.defineProperty(exports, \"groupByActionTypes\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.groupByActionTypes;\n  }\n});\nObject.defineProperty(exports, \"newHistory\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.newHistory;\n  }\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _reducer[\"default\"];\n  }\n});\n\nvar _actions = require(\"./actions\");\n\nvar _helpers = require(\"./helpers\");\n\nvar _reducer = _interopRequireDefault(require(\"./reducer\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }","\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = undoable;\n\nvar debug = _interopRequireWildcard(require(\"./debug\"));\n\nvar _actions = require(\"./actions\");\n\nvar _helpers = require(\"./helpers\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction createHistory(state, ignoreInitialState) {\n  // ignoreInitialState essentially prevents the user from undoing to the\n  // beginning, in the case that the undoable reducer handles initialization\n  // in a way that can't be redone simply\n  var history = (0, _helpers.newHistory)([], state, []);\n\n  if (ignoreInitialState) {\n    history._latestUnfiltered = null;\n  }\n\n  return history;\n} // insert: insert `state` into history, which means adding the current state\n//         into `past`, setting the new `state` as `present` and erasing\n//         the `future`.\n\n\nfunction insert(history, state, limit, group) {\n  var lengthWithoutFuture = history.past.length + 1;\n  debug.log('inserting', state);\n  debug.log('new free: ', limit - lengthWithoutFuture);\n  var past = history.past,\n      _latestUnfiltered = history._latestUnfiltered;\n  var isHistoryOverflow = limit && limit <= lengthWithoutFuture;\n  var pastSliced = past.slice(isHistoryOverflow ? 1 : 0);\n  var newPast = _latestUnfiltered != null ? [].concat(_toConsumableArray(pastSliced), [_latestUnfiltered]) : pastSliced;\n  return (0, _helpers.newHistory)(newPast, state, [], group);\n} // jumpToFuture: jump to requested index in future history\n\n\nfunction jumpToFuture(history, index) {\n  if (index < 0 || index >= history.future.length) return history;\n  var past = history.past,\n      future = history.future,\n      _latestUnfiltered = history._latestUnfiltered;\n  var newPast = [].concat(_toConsumableArray(past), [_latestUnfiltered], _toConsumableArray(future.slice(0, index)));\n  var newPresent = future[index];\n  var newFuture = future.slice(index + 1);\n  return (0, _helpers.newHistory)(newPast, newPresent, newFuture);\n} // jumpToPast: jump to requested index in past history\n\n\nfunction jumpToPast(history, index) {\n  if (index < 0 || index >= history.past.length) return history;\n  var past = history.past,\n      future = history.future,\n      _latestUnfiltered = history._latestUnfiltered;\n  var newPast = past.slice(0, index);\n  var newFuture = [].concat(_toConsumableArray(past.slice(index + 1)), [_latestUnfiltered], _toConsumableArray(future));\n  var newPresent = past[index];\n  return (0, _helpers.newHistory)(newPast, newPresent, newFuture);\n} // jump: jump n steps in the past or forward\n\n\nfunction jump(history, n) {\n  if (n > 0) return jumpToFuture(history, n - 1);\n  if (n < 0) return jumpToPast(history, history.past.length + n);\n  return history;\n} // helper to dynamically match in the reducer's switch-case\n\n\nfunction actionTypeAmongClearHistoryType(actionType, clearHistoryType) {\n  return clearHistoryType.indexOf(actionType) > -1 ? actionType : !actionType;\n} // redux-undo higher order reducer\n\n\nfunction undoable(reducer) {\n  var rawConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  debug.set(rawConfig.debug);\n\n  var config = _objectSpread({\n    limit: undefined,\n    filter: function filter() {\n      return true;\n    },\n    groupBy: function groupBy() {\n      return null;\n    },\n    undoType: _actions.ActionTypes.UNDO,\n    redoType: _actions.ActionTypes.REDO,\n    jumpToPastType: _actions.ActionTypes.JUMP_TO_PAST,\n    jumpToFutureType: _actions.ActionTypes.JUMP_TO_FUTURE,\n    jumpType: _actions.ActionTypes.JUMP,\n    neverSkipReducer: false,\n    ignoreInitialState: false,\n    syncFilter: false\n  }, rawConfig, {\n    initTypes: (0, _helpers.parseActions)(rawConfig.initTypes, ['@@redux-undo/INIT']),\n    clearHistoryType: (0, _helpers.parseActions)(rawConfig.clearHistoryType, [_actions.ActionTypes.CLEAR_HISTORY])\n  }); // Allows the user to call the reducer with redux-undo specific actions\n\n\n  var skipReducer = config.neverSkipReducer ? function (res, action) {\n    for (var _len = arguments.length, slices = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      slices[_key - 2] = arguments[_key];\n    }\n\n    return _objectSpread({}, res, {\n      present: reducer.apply(void 0, [res.present, action].concat(slices))\n    });\n  } : function (res) {\n    return res;\n  };\n  var initialState;\n  return function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    debug.start(action, state);\n    var history = state;\n\n    for (var _len2 = arguments.length, slices = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n      slices[_key2 - 2] = arguments[_key2];\n    }\n\n    if (!initialState) {\n      debug.log('history is uninitialized');\n\n      if (state === undefined) {\n        var createHistoryAction = {\n          type: '@@redux-undo/CREATE_HISTORY'\n        };\n        var start = reducer.apply(void 0, [state, createHistoryAction].concat(slices));\n        history = createHistory(start, config.ignoreInitialState);\n        debug.log('do not set initialState on probe actions');\n        debug.end(history);\n        return history;\n      } else if ((0, _helpers.isHistory)(state)) {\n        history = initialState = config.ignoreInitialState ? state : (0, _helpers.newHistory)(state.past, state.present, state.future);\n        debug.log('initialHistory initialized: initialState is a history', initialState);\n      } else {\n        history = initialState = createHistory(state, config.ignoreInitialState);\n        debug.log('initialHistory initialized: initialState is not a history', initialState);\n      }\n    }\n\n    var res;\n\n    switch (action.type) {\n      case undefined:\n        return history;\n\n      case config.undoType:\n        res = jump(history, -1);\n        debug.log('perform undo');\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      case config.redoType:\n        res = jump(history, 1);\n        debug.log('perform redo');\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      case config.jumpToPastType:\n        res = jumpToPast(history, action.index);\n        debug.log(\"perform jumpToPast to \".concat(action.index));\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      case config.jumpToFutureType:\n        res = jumpToFuture(history, action.index);\n        debug.log(\"perform jumpToFuture to \".concat(action.index));\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      case config.jumpType:\n        res = jump(history, action.index);\n        debug.log(\"perform jump to \".concat(action.index));\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      case actionTypeAmongClearHistoryType(action.type, config.clearHistoryType):\n        res = createHistory(history.present, config.ignoreInitialState);\n        debug.log('perform clearHistory');\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      default:\n        res = reducer.apply(void 0, [history.present, action].concat(slices));\n\n        if (config.initTypes.some(function (actionType) {\n          return actionType === action.type;\n        })) {\n          debug.log('reset history due to init action');\n          debug.end(initialState);\n          return initialState;\n        }\n\n        if (history._latestUnfiltered === res) {\n          // Don't handle this action. Do not call debug.end here,\n          // because this action should not produce side effects to the console\n          return history;\n        }\n        /* eslint-disable-next-line no-case-declarations */\n\n\n        var filtered = typeof config.filter === 'function' && !config.filter(action, res, history);\n\n        if (filtered) {\n          // if filtering an action, merely update the present\n          var filteredState = (0, _helpers.newHistory)(history.past, res, history.future, history.group);\n\n          if (!config.syncFilter) {\n            filteredState._latestUnfiltered = history._latestUnfiltered;\n          }\n\n          debug.log('filter ignored action, not storing it in past');\n          debug.end(filteredState);\n          return filteredState;\n        }\n        /* eslint-disable-next-line no-case-declarations */\n\n\n        var group = config.groupBy(action, res, history);\n\n        if (group != null && group === history.group) {\n          // if grouping with the previous action, only update the present\n          var groupedState = (0, _helpers.newHistory)(history.past, res, history.future, history.group);\n          debug.log('groupBy grouped the action with the previous action');\n          debug.end(groupedState);\n          return groupedState;\n        } // If the action wasn't filtered or grouped, insert normally\n\n\n        history = insert(history, res, config.limit, group);\n        debug.log('inserted new state into history');\n        debug.end(history);\n        return history;\n    }\n  };\n}","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useCallback } from 'react';\nimport { Transforms } from 'slate';\nimport { useSlate } from 'slate-react';\nimport getCurrentData from '../utils/getCurrentData';\nexport var removePlugin = function (editor, plugin) {\n    if (plugin.customRemove) {\n        plugin.customRemove(editor);\n    }\n    else if (plugin.pluginType === 'component') {\n        if (plugin.object === 'mark') {\n            editor.removeMark(plugin.type);\n        }\n        else if (plugin.object === 'inline') {\n            Transforms.unwrapNodes(editor, {\n                match: function (elem) { return elem.type === plugin.type; },\n            });\n            // Transforms.setNodes(editor, { type: null });\n        }\n        else if (plugin.object === 'block') {\n            if (plugin.replaceWithDefaultOnRemove) {\n                Transforms.setNodes(editor, {\n                    type: null,\n                });\n            }\n            else {\n                Transforms.unwrapNodes(editor, {\n                    match: function (elem) { return elem.type === plugin.type; },\n                    split: true,\n                });\n            }\n        }\n    }\n    else if (plugin.pluginType === 'data') {\n        if (!plugin.properties) {\n            // can't be removed\n        }\n        else {\n            var existingData_1 = getCurrentData(editor);\n            var dataWithout = Object.keys(existingData_1).reduce(function (acc, key) {\n                var _a;\n                if (plugin.properties.includes(key)) {\n                    return acc;\n                }\n                return __assign(__assign({}, acc), (_a = {}, _a[key] = existingData_1[key], _a));\n            }, {});\n            Transforms.setNodes(editor, {\n                data: dataWithout,\n            });\n        }\n    }\n};\nexport default (function (plugin) {\n    var editor = useSlate();\n    return useCallback(function () { return removePlugin(editor, plugin); }, []);\n});\n//# sourceMappingURL=useRemovePlugin.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useCallback } from 'react';\nimport { Transforms } from 'slate';\nimport { useSlate } from 'slate-react';\nimport { getCurrentNodeWithPlugin } from './useCurrentNodeWithPlugin';\nimport { removePlugin } from './useRemovePlugin';\nimport getCurrentData from '../utils/getCurrentData';\nexport var addPlugin = function (editor, plugin, props) {\n    var _a;\n    var _b = props || {}, passedData = _b.data, text = _b.text;\n    var currentNodeEntry = getCurrentNodeWithPlugin(editor, plugin);\n    if (text) {\n        var withExtraSpace = plugin.pluginType === 'component' &&\n            plugin.object === 'inline' &&\n            plugin.addExtraSpace;\n        var textToInsert = withExtraSpace ? text + ' ' : text;\n        editor.insertText(textToInsert);\n        Transforms.select(editor, {\n            anchor: editor.selection.anchor,\n            focus: __assign(__assign({}, editor.selection.focus), { offset: editor.selection.focus.offset - textToInsert.length }),\n        });\n    }\n    var data = passedData || (plugin.getInitialData ? plugin.getInitialData() : null);\n    var isActive = Boolean(currentNodeEntry);\n    if (isActive) {\n        Transforms.select(editor, currentNodeEntry[1]);\n        removePlugin(editor, plugin);\n    }\n    // add new\n    if (plugin.customAdd) {\n        plugin.customAdd(editor);\n    }\n    else if (plugin.pluginType === 'component') {\n        if (plugin.object === 'mark') {\n            editor.addMark(plugin.type, data || true);\n        }\n        else {\n            if (plugin.object === 'block' && plugin.replaceWithDefaultOnRemove) {\n                Transforms.setNodes(editor, { type: plugin.type, data: data });\n            }\n            else {\n                Transforms.wrapNodes(editor, {\n                    type: plugin.type,\n                    children: [],\n                    data: data,\n                }, { split: true });\n                // workaround for inline problems in slate\n                if (plugin.object === 'inline' &&\n                    plugin.addExtraSpace &&\n                    !text &&\n                    editor.selection) {\n                    var focus_1 = __assign({}, editor.selection.focus);\n                    Transforms.insertText(editor, ' ', {\n                        at: editor.selection.focus,\n                    });\n                    Transforms.select(editor, focus_1);\n                }\n            }\n        }\n    }\n    else if (plugin.pluginType === 'data') {\n        var existingData = (_a = getCurrentData(editor)) !== null && _a !== void 0 ? _a : {};\n        Transforms.setNodes(editor, {\n            data: __assign(__assign({}, existingData), (data !== null && data !== void 0 ? data : {})),\n        });\n    }\n};\nexport default (function (plugin) {\n    var editor = useSlate();\n    return useCallback(function (props) { return addPlugin(editor, plugin, props); }, []);\n});\n//# sourceMappingURL=useAddPlugin.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { Editor } from 'slate';\nvar getCurrentData = function (editor) {\n    var _a;\n    var _b = __read(Editor.nodes(editor, {\n        mode: 'all',\n        match: function (node) {\n            return Boolean(node.data);\n        },\n    }), 1), existingNodeWithData = _b[0];\n    var existingData = existingNodeWithData\n        ? (_a = existingNodeWithData[0]) === null || _a === void 0 ? void 0 : _a.data\n        : {};\n    return existingData;\n};\nexport default getCurrentData;\n//# sourceMappingURL=getCurrentData.js.map","/**\n * A list of positions in the layout space.\n */\nexport var PositionEnum;\n(function (PositionEnum) {\n    PositionEnum[\"LEFT_OF\"] = \"left-of\";\n    PositionEnum[\"RIGHT_OF\"] = \"right-of\";\n    PositionEnum[\"ABOVE\"] = \"above\";\n    PositionEnum[\"BELOW\"] = \"below\";\n    PositionEnum[\"INLINE_LEFT\"] = \"inline-left\";\n    PositionEnum[\"INLINE_RIGHT\"] = \"inline-right\";\n})(PositionEnum || (PositionEnum = {}));\n/**\n * Is true if built in production mode.\n */\nexport var isProduction = process.env.NODE_ENV === 'production';\n//# sourceMappingURL=const.js.map","// import ShortUniqueId from 'short-unique-id';\n// REMOVED BECAUSE OF https://github.com/jeanlescure/short-unique-id/issues/31\n// we do not need cryptographic save unique ids, so this poor mans solution is probably ok:\nvar LENGTH = 6;\nexport var createId = function () { return Math.random().toString(36).substr(2, LENGTH); };\n//# sourceMappingURL=createId.js.map","import { createId } from '../utils/createId';\nexport var generateIds = function () {\n    return {\n        cell: createId(),\n        item: createId(),\n        others: [createId(), createId(), createId()],\n    };\n};\n//# sourceMappingURL=helpers.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { generateIds } from '../helpers';\nexport var CELL_UPDATE_IS_DRAFT = 'CELL_UPDATE_IS_DRAFT';\nexport var CELL_UPDATE_DATA = 'CELL_UPDATE_DATA';\nexport var CELL_REMOVE = 'CELL_REMOVE';\nexport var CELL_RESIZE = 'CELL_RESIZE';\nexport var CELL_FOCUS = 'CELL_FOCUS';\nexport var CELL_BLUR = 'CELL_BLUR';\nexport var CELL_BLUR_ALL = 'CELL_BLUR_ALL';\nexport var updateCellIsDraft = function (id, isDraft, lang) {\n    if (isDraft === void 0) { isDraft = false; }\n    if (lang === void 0) { lang = null; }\n    return ({\n        type: CELL_UPDATE_IS_DRAFT,\n        ts: new Date(),\n        id: id,\n        isDraft: isDraft,\n        lang: lang,\n    });\n};\nexport var updateCellData = function (id) { return function (data, options) { return (__assign({ type: CELL_UPDATE_DATA, ts: new Date(), id: id,\n    data: data }, options)); }; };\nexport var removeCell = function (id, ids) {\n    if (ids === void 0) { ids = null; }\n    return ({\n        type: CELL_REMOVE,\n        ts: new Date(),\n        id: id,\n        ids: ids ? ids : generateIds(),\n    });\n};\nexport var resizeCell = function (id) { return function (size) {\n    if (size === void 0) { size = 1; }\n    return ({\n        type: CELL_RESIZE,\n        ts: new Date(),\n        id: id,\n        size: size,\n    });\n}; };\n/**\n * Dispatch to focus a cell.\n */\nexport var focusCell = function (id, scrollToCell, source) {\n    if (scrollToCell === void 0) { scrollToCell = false; }\n    if (source === void 0) { source = undefined; }\n    return ({\n        type: CELL_FOCUS,\n        ts: new Date(),\n        id: id,\n        scrollToCell: scrollToCell,\n        source: source,\n    });\n};\n/**\n * Dispatch to blur a cell.\n */\nexport var blurCell = function (id) { return ({\n    type: CELL_BLUR,\n    ts: new Date(),\n    id: id,\n}); };\n/**\n * Dispatch to blur all cells. For example when clicking on document body.\n */\nexport var blurAllCells = function () { return ({\n    type: CELL_BLUR_ALL,\n    ts: new Date(),\n}); };\nexport var coreActions = {\n    blurAllCells: blurAllCells,\n    blurCell: blurCell,\n    focusCell: focusCell,\n    resizeCell: resizeCell,\n    removeCell: removeCell,\n    updateCellData: updateCellData,\n    updateCellIsDraft: updateCellIsDraft,\n};\n//# sourceMappingURL=core.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexport var getChildCellPlugins = function (currentCellPlugins, cell) {\n    if (!(cell === null || cell === void 0 ? void 0 : cell.pluginId)) {\n        return currentCellPlugins;\n    }\n    var plugin = cell.pluginId\n        ? currentCellPlugins.find(function (p) { return p.id === cell.pluginId; })\n        : null;\n    if (!(plugin === null || plugin === void 0 ? void 0 : plugin.cellPlugins)) {\n        return currentCellPlugins;\n    }\n    var childPlugins = Array.isArray(plugin.cellPlugins)\n        ? plugin.cellPlugins\n        : plugin.cellPlugins(currentCellPlugins, cell.data);\n    return childPlugins.reduceRight(function (filtered, p) {\n        //omit if already seen\n        if (filtered.some(function (o) { return o.id === p.id; })) {\n            return filtered;\n        }\n        return __spread([p], filtered);\n    }, []);\n};\nexport var getAvailablePlugins = function (rootCellPlugins, ancestors) {\n    var e_1, _a;\n    var currentPlugins = rootCellPlugins;\n    try {\n        for (var ancestors_1 = __values(ancestors), ancestors_1_1 = ancestors_1.next(); !ancestors_1_1.done; ancestors_1_1 = ancestors_1.next()) {\n            var ancestor = ancestors_1_1.value;\n            currentPlugins = getChildCellPlugins(currentPlugins, ancestor);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (ancestors_1_1 && !ancestors_1_1.done && (_a = ancestors_1.return)) _a.call(ancestors_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return currentPlugins;\n};\n//# sourceMappingURL=getAvailablePlugins.js.map","export var getCellData = function (cell, lang) {\n    var _a, _b;\n    var dataI18n = cell.dataI18n;\n    return ((_b = (_a = dataI18n === null || dataI18n === void 0 ? void 0 : dataI18n[lang]) !== null && _a !== void 0 ? _a : \n    // find first non-empty\n    dataI18n === null || \n    // find first non-empty\n    dataI18n === void 0 ? void 0 : \n    // find first non-empty\n    dataI18n[Object.keys(dataI18n).find(function (l) { return dataI18n[l]; })]) !== null && _b !== void 0 ? _b : {});\n};\n//# sourceMappingURL=getCellData.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexport var removeUndefinedProps = function (obj) {\n    return Object.keys(obj).reduce(function (acc, key) {\n        var _a;\n        var value = obj[key];\n        if (typeof value === 'undefined' || value == null) {\n            return acc;\n        }\n        return __assign(__assign({}, acc), (_a = {}, _a[key] = value, _a));\n    }, {});\n};\n//# sourceMappingURL=removeUndefinedProps.js.map","export var SET_DISPLAY_REFERENCE_NODE_ID = 'SET_DISPLAY_REFERENCE_NODE_ID';\nexport var SET_DISPLAY_MODE = 'SET_DISPLAY_MODE';\nexport var SET_PREVIOUS_DISPLAY_MODE = 'SET_PREVIOUS_DISPLAY_MODE';\nexport var DISPLAY_MODE_PREVIEW = 'preview';\nexport var DISPLAY_MODE_LAYOUT = 'layout';\nexport var DISPLAY_MODE_EDIT = 'edit';\nexport var DISPLAY_MODE_INSERT = 'insert';\nexport var DISPLAY_MODE_RESIZING = 'resizing';\nexport var DEFAULT_DISPLAY_MODE = DISPLAY_MODE_EDIT;\nvar setDisplayMode = function (mode, referenceNodeId) { return function () { return ({\n    type: SET_DISPLAY_MODE,\n    ts: new Date(),\n    mode: mode,\n    referenceNodeId: referenceNodeId,\n}); }; };\nexport var setDisplayReferenceNodeId = function (referenceNodeId) { return ({\n    type: SET_DISPLAY_REFERENCE_NODE_ID,\n    ts: new Date(),\n    referenceNodeId: referenceNodeId,\n}); };\n/**\n * Dispatch to switch to arbitrary mode.\n */\nexport var setMode = function (mode, referenceNodeId) { return ({\n    type: SET_DISPLAY_MODE,\n    ts: new Date(),\n    mode: mode,\n    referenceNodeId: referenceNodeId,\n}); };\n/**\n * Dispatch to switch to insert display mode.\n */\nexport var insertMode = setDisplayMode(DISPLAY_MODE_INSERT);\n/**\n * Dispatch to switch to edit display mode.\n */\nexport var editMode = setDisplayMode(DISPLAY_MODE_EDIT);\n/**\n * Dispatch to switch to preview display mode.\n */\nexport var previewMode = setDisplayMode(DISPLAY_MODE_PREVIEW);\n/**\n * Dispatch to switch to layout display mode.\n */\nexport var layoutMode = setDisplayMode(DISPLAY_MODE_LAYOUT);\n/**\n * Dispatch to switch to resize display mode.\n */\nexport var resizeMode = setDisplayMode(DISPLAY_MODE_RESIZING);\n//# sourceMappingURL=display.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { createId } from '../../utils/createId';\nimport { getChildCellPlugins } from '../../utils/getAvailablePlugins';\nimport { getCellData } from '../../utils/getCellData';\nimport { removeUndefinedProps } from '../../utils/removeUndefinedProps';\nimport { editMode } from '../display';\nimport { generateIds } from '../helpers';\nimport { focusCell } from './core';\nexport var CELL_INSERT_ABOVE = 'CELL_INSERT_ABOVE';\nexport var CELL_INSERT_BELOW = 'CELL_INSERT_BELOW';\nexport var CELL_INSERT_LEFT_OF = 'CELL_INSERT_LEFT_OF';\nexport var CELL_INSERT_RIGHT_OF = 'CELL_INSERT_RIGHT_OF';\nexport var CELL_INSERT_INLINE_LEFT = 'CELL_INSERT_INLINE_LEFT';\nexport var CELL_INSERT_INLINE_RIGHT = 'CELL_INSERT_INLINE_RIGHT';\nexport var CELL_INSERT_AT_END = 'CELL_INSERT_AT_END';\nexport var CELL_INSERT_AS_NEW_ROW = 'CELL_INSERT_AS_NEW_ROW';\nexport var createRow = function (partialRow, options) {\n    var _a;\n    if (Array.isArray(partialRow)) {\n        return {\n            id: createId(),\n            cells: partialRow.map(function (c) { return createCell(c, options); }),\n        };\n    }\n    return removeUndefinedProps(__assign(__assign({ id: createId() }, partialRow), { cells: (_a = partialRow.cells) === null || _a === void 0 ? void 0 : _a.map(function (c) { return createCell(c, options); }) }));\n};\nexport var createCell = function (partialCell, options) {\n    var _a;\n    var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n    var cellPlugins = options.cellPlugins, lang = options.lang;\n    var pluginId = partialCell.plugin &&\n        (typeof partialCell.plugin == 'string'\n            ? partialCell.plugin\n            : partialCell.plugin.id);\n    var plugin = pluginId && cellPlugins.find(function (p) { return p.id === pluginId; });\n    var partialRows = ((_b = partialCell.rows) === null || _b === void 0 ? void 0 : _b.length) > 0\n        ? partialCell.rows\n        : (_d = (_c = plugin === null || plugin === void 0 ? void 0 : plugin.createInitialChildren) === null || _c === void 0 ? void 0 : _c.call(plugin)) !== null && _d !== void 0 ? _d : [];\n    var dataI18n = __assign((_a = {}, _a[lang] = (_j = (_g = (_e = partialCell === null || partialCell === void 0 ? void 0 : partialCell.data) !== null && _e !== void 0 ? _e : (_f = plugin === null || plugin === void 0 ? void 0 : plugin.createInitialData) === null || _f === void 0 ? void 0 : _f.call(plugin, partialCell)) !== null && _g !== void 0 ? _g : (_h = plugin === null || plugin === void 0 ? void 0 : plugin.createInitialState) === null || _h === void 0 ? void 0 : _h.call(plugin, partialCell)) !== null && _j !== void 0 ? _j : null, _a), ((_k = partialCell.dataI18n) !== null && _k !== void 0 ? _k : {}));\n    return removeUndefinedProps({\n        id: (_l = partialCell.id) !== null && _l !== void 0 ? _l : createId(),\n        isDraft: partialCell.isDraft,\n        isDraftI18n: partialCell.isDraftI18n,\n        inline: partialCell.inline,\n        size: partialCell.size || 12,\n        hasInlineNeighbour: partialCell.hasInlineNeighbour,\n        plugin: plugin\n            ? {\n                id: plugin.id,\n                version: plugin.version,\n            }\n            : undefined,\n        rows: partialRows === null || partialRows === void 0 ? void 0 : partialRows.map(function (r) {\n            return createRow(r, {\n                lang: lang,\n                cellPlugins: getChildCellPlugins(cellPlugins, {\n                    pluginId: pluginId,\n                    data: getCellData({\n                        dataI18n: dataI18n,\n                    }, lang),\n                }),\n            });\n        }),\n        dataI18n: dataI18n,\n    });\n};\nvar insert = function (type) { return function (options) { return function (partialCell, _a, level, ids) {\n    var _b;\n    var hoverId = _a.id, inline = _a.inline, hasInlineNeighbour = _a.hasInlineNeighbour, ancestorIds = _a.ancestorIds;\n    if (level === void 0) { level = 0; }\n    if (ids === void 0) { ids = null; }\n    var l = level;\n    var cell = createCell(partialCell, options);\n    switch (type) {\n        case CELL_INSERT_ABOVE:\n        case CELL_INSERT_BELOW: {\n            if ((inline || hasInlineNeighbour) && level < 1) {\n                l = 1;\n            }\n            break;\n        }\n        case CELL_INSERT_LEFT_OF:\n        case CELL_INSERT_RIGHT_OF: {\n            if ((inline || hasInlineNeighbour) && level < 1) {\n                l = 1;\n            }\n            break;\n        }\n        default:\n    }\n    var insertAction = {\n        type: type,\n        ts: new Date(),\n        item: cell,\n        hoverId: level === 0 ? hoverId : (_b = ancestorIds[Math.max(level - 1)]) !== null && _b !== void 0 ? _b : hoverId,\n        level: l,\n        // FIXME: item handling is a bit confusing,\n        // we now give some of them a name like \"cell\" or \"item\",\n        // but the purpose of the others is unclear\n        ids: ids ? ids : generateIds(),\n    };\n    return function (dispatch) {\n        dispatch(insertAction);\n        // FIXME: checking if an item is new or just moved around is a bit awkward\n        // FIXME: this doesn't work when duplicating, I've added an option to focus after insert\n        var isNew = !partialCell.id;\n        if (isNew || options.focusAfter) {\n            dispatch(editMode());\n            setTimeout(function () {\n                dispatch(focusCell(insertAction.ids.item, true));\n            }, 300);\n        }\n    };\n}; }; };\n/**\n * Insert a cell below of the hovering cell.\n */\nexport var insertCellBelow = insert(CELL_INSERT_BELOW);\n/**\n * Insert a cell above of the hovering cell.\n */\nexport var insertCellAbove = insert(CELL_INSERT_ABOVE);\n/**\n * Insert a cell right of the hovering cell.\n */\nexport var insertCellRightOf = insert(CELL_INSERT_RIGHT_OF);\n/**\n * Insert a cell left of the hovering cell.\n */\nexport var insertCellLeftOf = insert(CELL_INSERT_LEFT_OF);\n/**\n * Insert a cell inside the hovering cell, on the left.\n */\nexport var insertCellLeftInline = insert(CELL_INSERT_INLINE_LEFT);\n/**\n * Insert a cell inside the hovering cell, on the right.\n */\nexport var insertCellRightInline = insert(CELL_INSERT_INLINE_RIGHT);\nexport var insertCellAtTheEnd = insert(CELL_INSERT_AT_END);\nexport var insertCellNewAsNewRow = insert(CELL_INSERT_AS_NEW_ROW);\n// set new ids recursivly\nvar newIds = function (_a) {\n    var id = _a.id, item = __rest(_a, [\"id\"]);\n    return __assign(__assign({}, item), { dataI18n: item.dataI18n ? JSON.parse(JSON.stringify(item.dataI18n)) : {}, id: createId(), rows: item.rows\n            ? item.rows.map(function (row) { return (__assign(__assign({}, row), { id: createId(), cells: row.cells ? row.cells.map(newIds) : undefined })); })\n            : undefined });\n};\nexport var duplicateCell = function (options) { return function (item) {\n    var _a;\n    return insertCellBelow(options)(newIds(item), {\n        ancestorIds: [],\n        id: item.id,\n        hasInlineNeighbour: item.hasInlineNeighbour,\n        inline: item.inline,\n        levels: null,\n        pluginId: (_a = item.plugin) === null || _a === void 0 ? void 0 : _a.id,\n    });\n}; };\nexport var insertActions = {\n    insertCellRightInline: insertCellRightInline,\n    insertCellLeftInline: insertCellLeftInline,\n    insertCellLeftOf: insertCellLeftOf,\n    insertCellRightOf: insertCellRightOf,\n    insertCellAbove: insertCellAbove,\n    insertCellBelow: insertCellBelow,\n    duplicateCell: duplicateCell,\n    insertCellAtTheEnd: insertCellAtTheEnd,\n    insert: insert,\n};\n//# sourceMappingURL=insert.js.map","import { generateIds } from './helpers';\nexport var UPDATE_VALUE = 'UPDATE_VALUE';\nexport var updateValue = function (value) { return ({\n    type: UPDATE_VALUE,\n    ts: new Date(),\n    value: value,\n    ids: generateIds(),\n}); };\n//# sourceMappingURL=value.js.map","export var isRow = function (node) {\n    return Object.prototype.hasOwnProperty.call(node, 'cells');\n};\n//# sourceMappingURL=node.js.map","import { isRow } from '../../../types/node';\nexport var isEmpty = function (node) {\n    var _a;\n    if (!node) {\n        return true;\n    }\n    if (isRow(node)) {\n        return node.cells.length === 0;\n    }\n    if (((_a = node.rows) === null || _a === void 0 ? void 0 : _a.length) > 0) {\n        return false;\n    }\n    return !node.plugin;\n};\n//# sourceMappingURL=empty.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nimport { isEmpty } from './empty';\nimport { removeUndefinedProps } from '../../../utils/removeUndefinedProps';\nexport var flatten = function (c, n) {\n    return __spread(c, n);\n};\nexport var optimizeCells = function (cells) {\n    if (cells === void 0) { cells = []; }\n    return cells.filter(function (c) { return !isEmpty(c); });\n};\nexport var optimizeRows = function (rows) {\n    if (rows === void 0) { rows = []; }\n    return rows.filter(function (c) { return !isEmpty(c); });\n};\nexport var optimizeCell = function (cell) {\n    var rows = cell.rows, rest = __rest(cell, [\"rows\"]);\n    var optimized = __assign(__assign({}, rest), { rows: rows === null || rows === void 0 ? void 0 : rows.map(function (r) {\n            var _a = r.cells, cells = _a === void 0 ? [] : _a;\n            if (cells.length !== 1) {\n                return [r];\n            }\n            var _b = cells[0], cellRows = _b.rows, plugin = _b.plugin;\n            if ((cellRows === null || cellRows === void 0 ? void 0 : cellRows.length) > 0 && !plugin) {\n                return cellRows;\n            }\n            return [r];\n        }).reduce(flatten, []) });\n    return removeUndefinedProps(optimized);\n};\nexport var optimizeRow = function (_a) {\n    var cells = _a.cells, other = __rest(_a, [\"cells\"]);\n    return removeUndefinedProps(__assign(__assign({}, other), { cells: cells === null || cells === void 0 ? void 0 : cells.map(function (c) {\n            var _a = c.rows, rows = _a === void 0 ? [] : _a, size = c.size;\n            if (rows.length !== 1 || c.plugin) {\n                return [c];\n            }\n            var _b = rows[0].cells, rowCells = _b === void 0 ? [] : _b;\n            if (rowCells.length === 1) {\n                return rowCells.map(function (r) { return (__assign(__assign({}, r), { size: size })); });\n            }\n            return [c];\n        }).reduce(flatten, []) }));\n};\n//# sourceMappingURL=optimize.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { computeSizes, computeInlines } from './sizing';\nimport { optimizeRow, optimizeRows, optimizeCells } from './optimize';\nexport var setAllSizesAndOptimize = function (rows) {\n    if (rows === void 0) { rows = []; }\n    return optimizeRows(rows).map(function (r) {\n        var optimized = optimizeRow(r);\n        if (optimized.cells) {\n            optimized.cells = computeInlines(computeSizes(optimizeCells(optimized.cells.map(function (cell) { return (__assign(__assign({}, cell), { rows: cell.rows ? setAllSizesAndOptimize(cell.rows) : undefined })); }))));\n        }\n        return optimized;\n    });\n};\n//# sourceMappingURL=setAllSizesAndOptimize.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport deepEquals from '../../../utils/deepEquals';\nvar MAX_CELLS_PER_ROW = 12;\n/**\n * Sum up cell sizes: Σ(cell[size]).\n */\nexport var sumSizes = function (cells) {\n    if (cells === void 0) { cells = []; }\n    return cells.reduce(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    function (_a, _b) {\n        var _c = _a.size, p = _c === void 0 ? 99 : _c, a = _a.inline;\n        var _d = _b.size, c = _d === void 0 ? 99 : _d, b = _b.inline;\n        return ({\n            size: (a ? 0 : 1) * p + (b ? 0 : 1) * c,\n        });\n    }, { size: 0 }).size;\n};\n/**\n * Computes sizes an inline element was found.\n */\nexport var computeInlines = function (cells) {\n    if (cells === void 0) { cells = []; }\n    var doit = function () {\n        if (cells.length !== 2 || !cells[0].inline) {\n            return cells.map(function (_a) {\n                var hasInlineNeighbour = _a.hasInlineNeighbour, c = __rest(_a, [\"hasInlineNeighbour\"]);\n                return (__assign(__assign({}, c), { inline: null }));\n            });\n        }\n        return [\n            __assign(__assign({}, cells[0]), { size: cells[0].size || Math.round(MAX_CELLS_PER_ROW / 2) }),\n            __assign(__assign({}, cells[1]), { size: 12, hasInlineNeighbour: cells[0].id }),\n        ];\n    };\n    var result = doit();\n    // FIXME: this function is run on every action but is a noop in most casses\n    // however this will create new cells all the time, breaking memoization\n    // workaround is to do not return new instances if nothing's changed\n    if (deepEquals(cells, result)) {\n        return cells;\n    }\n    return result;\n};\n/**\n * Resize cells.\n */\nexport var resizeCells = function (cells, _a) {\n    if (cells === void 0) { cells = []; }\n    var id = _a.id, size = _a.size;\n    var prev = 0;\n    return cells.map(function (c) {\n        if (prev > 0) {\n            var ret = __assign(__assign({}, c), { size: c.size + prev - size });\n            prev = 0;\n            return ret;\n        }\n        else if (id === c.id) {\n            if (!c.inline) {\n                prev = c.size;\n            }\n            return __assign(__assign({}, c), { size: size });\n        }\n        return c;\n    });\n};\n/**\n * Balance cell sizes.\n *\n * @param {[...cell]} cells\n * @return {[...cell]}\n */\nexport var computeSizes = function (cells) {\n    if (cells === void 0) { cells = []; }\n    var total = sumSizes(cells);\n    if (total === MAX_CELLS_PER_ROW) {\n        return cells;\n    }\n    var count = cells.length;\n    var sizePerCell = Math.floor(MAX_CELLS_PER_ROW / count);\n    var spaceLeft = MAX_CELLS_PER_ROW - sizePerCell * (count - 1);\n    return cells.map(function (c, k) { return (__assign(__assign({}, c), { size: k === count - 1 ? spaceLeft : sizePerCell })); });\n};\n//# sourceMappingURL=sizing.js.map","/* eslint-disable @typescript-eslint/ban-types */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nimport { CELL_INSERT_ABOVE, CELL_INSERT_BELOW, CELL_INSERT_INLINE_LEFT, CELL_INSERT_INLINE_RIGHT, CELL_INSERT_LEFT_OF, CELL_INSERT_RIGHT_OF, CELL_REMOVE, CELL_RESIZE, CELL_UPDATE_DATA, CELL_UPDATE_IS_DRAFT, CELL_INSERT_AT_END, CELL_INSERT_AS_NEW_ROW, } from '../../actions/cell';\nimport { createId } from '../../utils/createId';\nimport { removeUndefinedProps } from '../../utils/removeUndefinedProps';\nimport { flatten, optimizeCell, optimizeCells, optimizeRow, optimizeRows, } from './helper/optimize';\nimport { resizeCells } from './helper/sizing';\nvar cell = function (s, a, depth) {\n    return optimizeCell((function (state, action) {\n        var _a, _b;\n        var _c, _d, _e;\n        var reduce = function () {\n            return removeUndefinedProps(__assign(__assign({}, state), { rows: rows(state.rows, action, depth + 1) }));\n        };\n        switch (action.type) {\n            case CELL_UPDATE_IS_DRAFT:\n                if (action.id === state.id) {\n                    var reduced = reduce();\n                    if (action.lang) {\n                        return __assign(__assign({}, reduced), { isDraftI18n: __assign(__assign({}, ((_c = reduced.isDraftI18n) !== null && _c !== void 0 ? _c : {})), (_a = {}, _a[action.lang] = action.isDraft, _a)) });\n                    }\n                    else {\n                        return __assign(__assign({}, reduced), { isDraft: action.isDraft });\n                    }\n                }\n                return reduce();\n            case CELL_UPDATE_DATA:\n                if (action.id === state.id) {\n                    // If this cell is being updated, set the data\n                    var reduced = reduce();\n                    // copy because we mutate afterwards with delete\n                    var newI18nData = __assign({}, ((_d = reduced.dataI18n) !== null && _d !== void 0 ? _d : {}));\n                    var emptyValue = action.data === null;\n                    if (action.lang && emptyValue) {\n                        newI18nData === null || newI18nData === void 0 ? true : delete newI18nData[action.lang];\n                    }\n                    return __assign(__assign({}, reduced), { dataI18n: __assign(__assign({}, (newI18nData !== null && newI18nData !== void 0 ? newI18nData : {})), (!emptyValue\n                            ? (_b = {}, _b[action.lang] = action.data, _b) : {})) });\n                }\n                return reduce();\n            case CELL_INSERT_ABOVE:\n                if (action.hoverId === state.id) {\n                    return {\n                        id: action.ids.cell,\n                        rows: rows([\n                            {\n                                id: action.ids.others[0],\n                                cells: [\n                                    __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                                ],\n                            },\n                            {\n                                id: action.ids.others[1],\n                                cells: [__assign(__assign({}, reduce()), { id: action.ids.others[2] })],\n                            },\n                        ], __assign(__assign({}, action), { hoverId: null }), depth + 1),\n                    };\n                }\n                return reduce();\n            case CELL_INSERT_BELOW:\n                if (action.hoverId === state.id) {\n                    return {\n                        id: action.ids.cell,\n                        rows: rows([\n                            {\n                                id: action.ids.others[0],\n                                cells: [__assign(__assign({}, reduce()), { id: action.ids.others[1] })],\n                            },\n                            {\n                                id: action.ids.others[2],\n                                cells: [\n                                    __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                                ],\n                            },\n                        ], __assign(__assign({}, action), { hoverId: null }), depth + 1),\n                    };\n                }\n                return reduce();\n            case CELL_INSERT_AS_NEW_ROW: {\n                if (action.hoverId === state.id) {\n                    return __assign(__assign({}, state), { rows: __spread(((_e = state.rows) !== null && _e !== void 0 ? _e : []), [\n                            {\n                                id: action.ids.others[1],\n                                cells: [\n                                    __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                                ],\n                            },\n                        ]) });\n                }\n                return reduce();\n            }\n            default:\n                return reduce();\n        }\n    })(s, a));\n};\nvar createEmptyCell = function () { return ({\n    id: createId(),\n    rows: [\n        {\n            id: createId(),\n            cells: [],\n        },\n    ],\n}); };\nexport var cells = function (state, action, depth) {\n    if (state === void 0) { state = []; }\n    if (depth === void 0) { depth = 0; }\n    var newCells = depth === 0 && state.length === 0 ? [createEmptyCell()] : state;\n    switch (action.type) {\n        case CELL_RESIZE:\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            newCells = resizeCells(newCells, action);\n            break;\n        case CELL_INSERT_AT_END:\n        case CELL_INSERT_AS_NEW_ROW:\n        case CELL_INSERT_BELOW:\n        case CELL_INSERT_ABOVE:\n            newCells = newCells.filter(function (c) { return c.id !== action.item.id; }); // this removes the cell if it already exists\n            break;\n        case CELL_INSERT_LEFT_OF:\n            newCells = newCells\n                .filter(function (c) { return c.id !== action.item.id; }) // this removes the cell if it already exists\n                .map(function (c) {\n                return action.hoverId === c.id\n                    ? [\n                        __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                        __assign(__assign({}, c), { id: action.ids.others[0] }),\n                    ]\n                    : [c];\n            })\n                .reduce(flatten, []);\n            break;\n        case CELL_INSERT_RIGHT_OF:\n            newCells = newCells\n                .filter(function (c) { return c.id !== action.item.id; }) // this removes the cell if it already exists\n                .map(function (c) {\n                return action.hoverId === c.id\n                    ? [\n                        __assign(__assign({}, c), { id: action.ids.others[0] }),\n                        __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                    ]\n                    : [c];\n            })\n                .reduce(flatten, []);\n            break;\n        case CELL_INSERT_INLINE_RIGHT:\n        case CELL_INSERT_INLINE_LEFT:\n            newCells = newCells\n                .filter(function (c) { return c.id !== action.item.id; }) // this removes the cell if it already exists\n                .map(function (c) {\n                if (action.hoverId === c.id) {\n                    return [\n                        {\n                            id: action.ids.cell,\n                            rows: [\n                                {\n                                    id: action.ids.others[0],\n                                    cells: [\n                                        __assign(__assign({}, action.item), { inline: action.type === CELL_INSERT_INLINE_RIGHT\n                                                ? 'right'\n                                                : 'left', id: action.ids.item, size: 0 }),\n                                        __assign(__assign({}, c), { id: action.ids.others[1], inline: null, hasInlineNeighbour: action.ids.item, size: 0 }),\n                                    ],\n                                },\n                            ],\n                        },\n                    ];\n                }\n                return [c];\n            })\n                .reduce(flatten, []);\n            break;\n        case CELL_REMOVE:\n            newCells = newCells.filter(function (_a) {\n                var id = _a.id;\n                return id !== action.id;\n            });\n            break;\n    }\n    var reducedCells = newCells.map(function (c) { return cell(c, action, depth); });\n    return optimizeCells(reducedCells);\n};\nvar row = function (s, a, depth) {\n    return optimizeRow((function (state, action) {\n        var reduce = function () { return (__assign(__assign({}, state), { cells: cells(state.cells, action, depth + 1) })); };\n        switch (action.type) {\n            case CELL_INSERT_LEFT_OF:\n                if (action.hoverId !== state.id) {\n                    return reduce();\n                }\n                return __assign(__assign({}, state), { cells: cells(__spread([\n                        __assign(__assign({}, action.item), { id: action.ids.item, inline: null })\n                    ], state.cells), __assign(__assign({}, action), { hoverId: null }), depth + 1) });\n            case CELL_INSERT_RIGHT_OF:\n                if (action.hoverId !== state.id) {\n                    return reduce();\n                }\n                return __assign(__assign({}, state), { cells: cells(__spread(state.cells, [\n                        __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                    ]), __assign(__assign({}, action), { hoverId: null }), depth + 1) });\n            /*case CELL_DRAG_HOVER:\n              if (action.hoverId === state.id) {\n                return { ...reduce(), hoverPosition: action.position };\n              }\n              return reduce();\n              */\n            default:\n                return reduce();\n        }\n    })(s, a));\n};\nexport var rows = function (s, a, depth) {\n    if (s === void 0) { s = []; }\n    if (depth === void 0) { depth = 0; }\n    return optimizeRows(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (function (state, action) {\n        var reduce = function () { return state.map(function (r) { return row(r, action, depth); }); };\n        switch (action.type) {\n            case CELL_INSERT_ABOVE:\n                return state\n                    .map(function (r) {\n                    return action.hoverId === r.id\n                        ? [\n                            {\n                                cells: [\n                                    __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                                ],\n                                id: action.ids.others[0],\n                            },\n                            __assign(__assign({}, r), { id: action.ids.others[1] }),\n                        ]\n                        : [r];\n                })\n                    .reduce(flatten, [])\n                    .map(function (r) { return row(r, action, depth); });\n            case CELL_INSERT_BELOW:\n                return state\n                    .map(function (r) {\n                    return action.hoverId === r.id\n                        ? [\n                            __assign(__assign({}, r), { id: action.ids.others[0] }),\n                            {\n                                cells: [\n                                    __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                                ],\n                                id: action.ids.others[1],\n                            },\n                        ]\n                        : [r];\n                })\n                    .reduce(flatten, [])\n                    .map(function (r) { return row(r, action, depth); });\n            case CELL_INSERT_AT_END: {\n                var newRows = depth !== 0\n                    ? state\n                    : __spread(state, [\n                        {\n                            cells: [\n                                __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                            ],\n                            id: action.ids.others[1],\n                        },\n                    ]);\n                return newRows.map(function (r) { return row(r, action, depth); });\n            }\n            default:\n                return reduce();\n        }\n    })(s, a));\n};\n//# sourceMappingURL=tree.js.map","import undoable from 'redux-undo';\nimport { set } from 'redux-undo/lib/debug';\nimport { CELL_REMOVE, CELL_RESIZE, CELL_UPDATE_DATA, } from '../../actions/cell/core';\nimport { CELL_INSERT_ABOVE, CELL_INSERT_AS_NEW_ROW, CELL_INSERT_AT_END, CELL_INSERT_BELOW, CELL_INSERT_INLINE_LEFT, CELL_INSERT_INLINE_RIGHT, CELL_INSERT_LEFT_OF, CELL_INSERT_RIGHT_OF, } from '../../actions/cell/insert';\nimport { UPDATE_VALUE } from '../../actions/value';\nimport { isProduction } from '../../const';\nimport { value } from '../value';\nif (!isProduction) {\n    set(true);\n}\nexport var values = undoable(value, {\n    filter: function filterState(action, currentState, previousHistory) {\n        var _a;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if ((_a = action) === null || _a === void 0 ? void 0 : _a.notUndoable) {\n            return false;\n        }\n        var undoable = [\n            UPDATE_VALUE,\n            CELL_UPDATE_DATA,\n            CELL_REMOVE,\n            CELL_RESIZE,\n            CELL_INSERT_ABOVE,\n            CELL_INSERT_BELOW,\n            CELL_INSERT_LEFT_OF,\n            CELL_INSERT_RIGHT_OF,\n            CELL_INSERT_INLINE_LEFT,\n            CELL_INSERT_INLINE_RIGHT,\n            CELL_INSERT_AT_END,\n            CELL_INSERT_AS_NEW_ROW,\n        ].indexOf(action.type) >= 0;\n        return undoable;\n    },\n    neverSkipReducer: true,\n    syncFilter: true,\n});\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { setAllSizesAndOptimize } from './helper/setAllSizesAndOptimize';\nimport { rows } from './tree';\nexport var value = function (state, action) {\n    switch (action.type) {\n        case 'UPDATE_VALUE': {\n            return action.value;\n        }\n    }\n    var newRows = (state === null || state === void 0 ? void 0 : state.rows) ? setAllSizesAndOptimize(rows(state.rows, action, 0))\n        : [];\n    return __assign(__assign({}, state), { rows: newRows });\n};\n//# sourceMappingURL=index.js.map","/**\n * @module src/editor/actions/cell/drag\n */\nimport { PositionEnum } from '../../const';\nexport var CELL_DRAG_HOVER = 'CELL_DRAG_HOVER';\nexport var CELL_DRAG = 'CELL_DRAG';\nexport var CELL_DRAG_CANCEL = 'CELL_DRAG_CANCEL';\nexport var CLEAR_CLEAR_HOVER = 'CLEAR_CLEAR_HOVER';\n/**\n * Creates a redux action for when a cell hovers another item.\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHover(drag, hover, level, position))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @param {number} level Set the level if the dragged cells should hover over an ancestor of hover.\n * @param {string} position Can be left, right, above, below.\n * @return {Action}\n */\nexport var cellHover = function (drag, hover, level, position) {\n    var _a;\n    if (level === void 0) { level = 0; }\n    var hoverId = level === 0\n        ? hover.id\n        : (_a = hover.ancestorIds[Math.max(0, level - 1)]) !== null && _a !== void 0 ? _a : hover.id;\n    return {\n        type: CELL_DRAG_HOVER,\n        ts: new Date(),\n        dragId: drag.id,\n        hoverId: hoverId,\n        level: level,\n        position: position,\n    };\n};\n/**\n * Creates a redux action for when a cell is hovering another cell on the left.\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverLeftOf(drag, hover, level))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @param {number} level Set the level if the dragged cells should hover over an ancestor of hover.\n * @return {Action}\n */\nexport var cellHoverLeftOf = function (drag, hover, level) { return cellHover(drag, hover, level, PositionEnum.LEFT_OF); };\n/**\n * Creates a redux action for when a cell is hovering another cell on the right.\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverRightOf(drag, hover, level))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @param {number} level Set the level if the dragged cells should hover over an ancestor of hover.\n * @return {Action}\n */\nexport var cellHoverRightOf = function (drag, hover, level) { return cellHover(drag, hover, level, PositionEnum.RIGHT_OF); };\n/**\n * Creates a redux action for when a cell is hovering another cell above.\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverAbove(drag, hover, level))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @param {number} level Set the level if the dragged cells should hover over an ancestor of hover.\n * @return {Action}\n */\nexport var cellHoverAbove = function (drag, hover, level) { return cellHover(drag, hover, level, PositionEnum.ABOVE); };\n/**\n * Creates a redux action for when a cell is hovering another cell below.\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverBelow(drag, hover, level))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @param {number} level Set the level if the dragged cells should hover over an ancestor of hover.\n * @return {Action}\n */\nexport var cellHoverBelow = function (drag, hover, level) { return cellHover(drag, hover, level, PositionEnum.BELOW); };\n/**\n * Creates a redux action for when a cell is hovering another cell on the left, but inline (css floating).\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverInlineLeft(drag, hover))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @return {Action}\n */\nexport var cellHoverInlineLeft = function (drag, hover) {\n    return cellHover(drag, hover, 0, PositionEnum.INLINE_LEFT);\n};\n/**\n * Creates a redux action for when a cell is hovering another cell on the right, but inline (css floating).\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverInlineRight(drag, hover))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @return {Action}\n */\nexport var cellHoverInlineRight = function (drag, hover) {\n    return cellHover(drag, hover, 0, PositionEnum.INLINE_RIGHT);\n};\n/**\n * Creates a redux action for when a cell is being dragged.\n *\n * @example\n * // const store = redux.createStore()\n * // const cell = { id: '1', ... }\n * store.dispatch(dragCell(cell.id))\n *\n * @param {string} id The id of the cell that is being dragged.\n * @return {Action}\n */\nexport var dragCell = function (id) { return ({\n    type: CELL_DRAG,\n    ts: new Date(),\n    id: id,\n}); };\n/**\n * Creates a redux action to clear hover state of all cells.\n *\n * @return {Action}\n */\nexport var clearHover = function () { return ({\n    type: CLEAR_CLEAR_HOVER,\n    ts: new Date(),\n}); };\n/**\n * Creates a redux action for when cell dragging ends.\n *\n * @example\n * // const store = redux.createStore()\n * // const cell = { id: '1', ... }\n * store.dispatch(cancelCellDrag(cell.id))\n *\n * @param {string} id\n * @return {Action}\n */\nexport var cancelCellDrag = function () { return ({\n    type: CELL_DRAG_CANCEL,\n    ts: new Date(),\n}); };\nexport var dragActions = {\n    cancelCellDrag: cancelCellDrag,\n    clearHover: clearHover,\n    dragCell: dragCell,\n    cellHoverInlineRight: cellHoverInlineRight,\n    cellHoverInlineLeft: cellHoverInlineLeft,\n    cellHoverBelow: cellHoverBelow,\n    cellHoverAbove: cellHoverAbove,\n    cellHoverRightOf: cellHoverRightOf,\n    cellHoverLeftOf: cellHoverLeftOf,\n    cellHover: cellHover,\n};\n//# sourceMappingURL=drag.js.map","export var SET_LANG = 'SET_LANG';\nexport var setLang = function (lang) { return ({\n    type: SET_LANG,\n    lang: lang,\n}); };\n//# sourceMappingURL=setting.js.map","import { combineReducers } from 'redux';\nimport { values } from './values';\nimport { display } from './display';\nimport { focus } from './focus';\nimport { hover } from './hover';\nimport { settings } from './settings';\nvar reducer = combineReducers({\n    values: values,\n    display: display,\n    focus: focus,\n    settings: settings,\n    hover: hover,\n    __nodeCache: function () { return null; },\n});\nexport { reducer };\nexport default combineReducers({ reactPage: reducer });\nexport function initialState(value, lang) {\n    return {\n        reactPage: {\n            __nodeCache: {},\n            hover: null,\n            focus: null,\n            display: {\n                mode: 'edit',\n            },\n            settings: {\n                lang: lang,\n            },\n            values: {\n                past: [],\n                present: value,\n                future: [],\n            },\n        },\n    };\n}\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { CELL_BLUR_ALL } from '../../actions/cell';\nimport { DEFAULT_DISPLAY_MODE, SET_DISPLAY_MODE, SET_DISPLAY_REFERENCE_NODE_ID, } from '../../actions/display';\nexport var display = function (state, action) {\n    if (state === void 0) { state = {\n        mode: DEFAULT_DISPLAY_MODE,\n    }; }\n    switch (action.type) {\n        case SET_DISPLAY_REFERENCE_NODE_ID:\n            return __assign(__assign({}, state), { referenceNodeId: action.referenceNodeId });\n        case CELL_BLUR_ALL: {\n            return {\n                mode: state.mode,\n                referenceNodeId: null,\n            };\n        }\n        case SET_DISPLAY_MODE:\n            return {\n                mode: action.mode,\n                referenceNodeId: action.referenceNodeId || state.referenceNodeId,\n            };\n        default:\n            return state;\n    }\n};\n//# sourceMappingURL=index.js.map","import { CELL_FOCUS, CELL_BLUR, CELL_BLUR_ALL } from '../../actions/cell';\nexport var focus = function (state, action) {\n    if (state === void 0) { state = null; }\n    switch (action.type) {\n        case CELL_FOCUS: {\n            return {\n                nodeId: action.id,\n                source: action.source,\n                scrollToCell: action.scrollToCell ? new Date().getTime() : null,\n            };\n        }\n        case CELL_BLUR_ALL:\n            return null;\n        case CELL_BLUR:\n            return action.id === (state === null || state === void 0 ? void 0 : state.nodeId) ? null : state;\n        default:\n            return state;\n    }\n};\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { SET_LANG } from '../../actions/setting';\nexport var settings = function (state, action) {\n    if (state === void 0) { state = {\n        lang: null,\n    }; }\n    switch (action.type) {\n        case SET_LANG:\n            return __assign(__assign({}, state), { lang: action.lang });\n        default:\n            return state;\n    }\n};\n//# sourceMappingURL=index.js.map","import { CELL_DRAG_HOVER, CLEAR_CLEAR_HOVER, } from '../../actions/cell';\nexport var hover = function (state, action) {\n    if (state === void 0) { state = null; }\n    switch (action.type) {\n        case CELL_DRAG_HOVER: {\n            return {\n                nodeId: action.hoverId,\n                position: action.position,\n            };\n        }\n        case CLEAR_CLEAR_HOVER:\n            return null;\n        default:\n            return state;\n    }\n};\n//# sourceMappingURL=index.js.map","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nimport { isRow } from '../../types/node';\n/** */\nvar findNode = function (nodes, nodeId, ancestors) {\n    var e_1, _a;\n    if (ancestors === void 0) { ancestors = []; }\n    try {\n        for (var nodes_1 = __values(nodes), nodes_1_1 = nodes_1.next(); !nodes_1_1.done; nodes_1_1 = nodes_1.next()) {\n            var node = nodes_1_1.value;\n            if (node.id === nodeId) {\n                return {\n                    node: node,\n                    ancestors: ancestors,\n                };\n            }\n            // else search children\n            if (isRow(node) && node.cells) {\n                var found = findNode(node.cells, nodeId, __spread([node], ancestors));\n                if (found) {\n                    return found;\n                }\n            }\n            else if (!isRow(node) && node.rows) {\n                var found = findNode(node.rows, nodeId, __spread([node], ancestors));\n                if (found) {\n                    return found;\n                }\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (nodes_1_1 && !nodes_1_1.done && (_a = nodes_1.return)) _a.call(nodes_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return null;\n};\n/*\nlet sum = 0;\nlet missum = 0;\nconst end = (start, hit) => {\n  const now = performance.now();\n  const diff = now - start;\n  sum += diff;\n  if (!hit) missum++;\n  console.log('time', hit ? '!' : '?', missum, diff, sum);\n};\n*/\nexport var findNodeInState = function (state, nodeId) {\n    var _a, _b;\n    // const now = performance.now();\n    // POOR mans node cache\n    // it gets removed every reduce, so we don't have to clear it manually\n    if (!state.reactPage.__nodeCache) {\n        state.reactPage.__nodeCache = {};\n    }\n    if (state.reactPage.__nodeCache[nodeId]) {\n        //end(now, true);\n        return state.reactPage.__nodeCache[nodeId];\n    }\n    var result = findNode((_b = (_a = state.reactPage.values) === null || _a === void 0 ? void 0 : _a.present) === null || _b === void 0 ? void 0 : _b.rows, nodeId);\n    state.reactPage.__nodeCache[nodeId] = result;\n    //end(now, false);\n    return result;\n};\nexport var currentValue = function (state) { var _a, _b; return (_b = (_a = state === null || state === void 0 ? void 0 : state.reactPage) === null || _a === void 0 ? void 0 : _a.values) === null || _b === void 0 ? void 0 : _b.present; };\nexport var selectNode = function (state, nodeId) {\n    var found = findNodeInState(state, nodeId);\n    return found;\n};\n//# sourceMappingURL=index.js.map","import createStore from './store';\nimport { setLang } from './actions/setting';\nimport { findNodeInState } from './selector/editable';\nimport { createContext } from 'react';\nimport { createId } from './utils/createId';\nexport var EditorContext = createContext(null);\nvar EditorStore = /** @class */ (function () {\n    function EditorStore(_a) {\n        var _this = this;\n        var _b = _a.middleware, middleware = _b === void 0 ? [] : _b, store = _a.store, initialState = _a.initialState;\n        this.getNodeWithAncestors = function (nodeId) {\n            return findNodeInState(_this.store.getState(), nodeId);\n        };\n        this.getNode = function (nodeId) {\n            var _a;\n            return (_a = findNodeInState(_this.store.getState(), nodeId)) === null || _a === void 0 ? void 0 : _a.node;\n        };\n        this.store = store || createStore(initialState, middleware);\n        this.middleware = middleware;\n    }\n    EditorStore.prototype.setLang = function (lang) {\n        this.store.dispatch(setLang(lang));\n    };\n    return EditorStore;\n}());\nexport var createEmptyState = function () {\n    return ({ id: createId(), rows: [] });\n};\nexport default EditorStore;\n//# sourceMappingURL=EditorStore.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducer';\nimport { isProduction } from './const';\n/**\n * Returns a new redux store.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport default (function (initialState, middleware) {\n    if (middleware === void 0) { middleware = []; }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var v = !isProduction &&\n        typeof window === 'object' &&\n        window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n        ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\n        : compose;\n    return createStore(rootReducer, initialState, v(applyMiddleware.apply(void 0, __spread(middleware, [thunk]))));\n});\n//# sourceMappingURL=store.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport { createDispatchHook, createSelectorHook, createStoreHook, Provider, } from 'react-redux';\nexport var ReduxContext = React.createContext(null);\nexport var ReduxProvider = function (_a) {\n    var store = _a.store, props = __rest(_a, [\"store\"]);\n    return (React.createElement(Provider, __assign({ store: store, context: ReduxContext }, props)));\n};\nexport var useStore = createStoreHook(ReduxContext);\nexport var useDispatch = createDispatchHook(ReduxContext\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n);\nexport var useSelector = createSelectorHook(ReduxContext);\n//# sourceMappingURL=reduxConnect.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React, { createContext, useContext } from 'react';\nimport { EditorContext } from '../../EditorStore';\nimport { useSelector } from '../../reduxConnect';\nimport { getLang } from '../../selector/setting';\nimport { normalizeCellSpacing } from '../../utils/getCellSpacing';\nimport NoopProvider from '../Cell/NoopProvider';\n/**\n * @returns the store object of the current editor. Contains the redux store.\n */\nexport var useEditorStore = function () { return useContext(EditorContext); };\nexport var OptionsContext = createContext({\n    allowMoveInEditMode: true,\n    allowResizeInEditMode: true,\n    cellPlugins: [],\n    languages: [],\n    pluginsWillChange: false,\n});\n/**\n * @returns the options object of the current Editor. @see Options type for more information\n */\nexport var useOptions = function () { return useContext(OptionsContext); };\n/**\n * @returns the an object with a single `t` function for ui translations\n */\nexport var useUiTranslator = function () {\n    var uiTranslator = useOptions().uiTranslator;\n    return {\n        t: function (key) {\n            var _a;\n            return (_a = uiTranslator === null || uiTranslator === void 0 ? void 0 : uiTranslator(key)) !== null && _a !== void 0 ? _a : key;\n        },\n    };\n};\n/**\n * @returns the current language\n */\nexport var useLang = function () {\n    return useSelector(getLang);\n};\n/**\n * @returns cell spacing for the current cell sub-tree\n */\nexport var useCellSpacing = function () {\n    return normalizeCellSpacing(useOptions().cellSpacing);\n};\n/**\n * @returns a Provider/value tuple that can be used to override cell spacing for a subtree of cells\n */\nexport var useCellSpacingProvider = function (cellSpacing) {\n    var options = useOptions();\n    var value = React.useMemo(function () { return (__assign(__assign({}, options), { cellSpacing: normalizeCellSpacing(cellSpacing) })); }, [options, JSON.stringify(cellSpacing)]);\n    if (typeof cellSpacing === 'undefined' || cellSpacing == null) {\n        return [NoopProvider, undefined];\n    }\n    else {\n        return [OptionsContext.Provider, value];\n    }\n};\n//# sourceMappingURL=options.js.map"],"sourceRoot":""}