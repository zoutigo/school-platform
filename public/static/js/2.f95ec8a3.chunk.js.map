{"version":3,"sources":["../../../src/core/reduxConnect.tsx","../../../../src/core/actions/display.ts","../../../src/core/const.ts","../../../../../src/core/selector/editable/index.ts","../../../../../src/core/actions/cell/core.ts","../../../../src/core/actions/helpers.ts","../../../../../src/core/actions/cell/insert.ts","../../../../src/core/actions/setting.ts","../../../../src/core/selector/setting.ts","../../../../../src/core/components/hooks/options.ts","../../../src/core/EditorStore.ts","../../../src/core/store.ts","../node_modules/redux-undo/lib/index.js","../node_modules/redux-undo/lib/actions.js","../node_modules/redux-undo/lib/helpers.js","../node_modules/redux-undo/lib/debug.js","../../../../src/core/actions/value.ts","../../../../../src/core/reducer/value/tree.ts","../../../../../src/core/reducer/values/index.ts","../../../../../src/core/reducer/value/index.ts","../../../../src/core/reducer/index.ts","../../../../../src/core/reducer/display/index.ts","../../../../../src/core/reducer/focus/index.ts","../../../../../src/core/reducer/settings/index.ts","../../../../../src/core/reducer/hover/index.ts","../node_modules/redux-undo/lib/reducer.js","../../../../../src/core/actions/cell/drag.ts"],"names":["PositionEnum","id","t","Object","defineProperty","exports","value","enumerable","get","_actions","ActionTypes","ActionCreators","_helpers","parseActions","isHistory","includeAction","excludeAction","combineFilters","groupByActionTypes","newHistory","_reducer","obj","require","__esModule","UNDO","REDO","JUMP_TO_FUTURE","JUMP_TO_PAST","JUMP","CLEAR_HISTORY","undo","type","redo","jumpToFuture","index","jumpToPast","jump","clearHistory","rawActions","defaultValue","arguments","length","undefined","Array","isArray","history","present","future","past","actions","action","indexOf","_len","filters","_key","reduce","prev","curr","currentState","previousHistory","group","_latestUnfiltered","limit","_toConsumableArray","arr","i","arr2","_arrayWithoutHoles","iter","Symbol","iterator","prototype","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","__DEBUG__","displayBuffer","set","debug","start","state","header","next","msgs","console","colorFormat","colors","end","nextState","_displayBuffer","_console","_console2","_console3","_console4","_console5","groupCollapsed","apply","log","groupEnd","_console6","_console7","_console8","_console9","_console10","printBuffer","args","concat","text","color","mode","referenceNodeId","_typeof","constructor","reducer","rawConfig","initialState","config","_objectSpread","filter","groupBy","undoType","redoType","jumpToPastType","jumpToFutureType","jumpType","neverSkipReducer","ignoreInitialState","syncFilter","initTypes","clearHistoryType","skipReducer","res","slices","_len2","_key2","createHistoryAction","createHistory","actionTypeAmongClearHistoryType","some","actionType","filtered","filteredState","groupedState","insert","cache","_getRequireWildcardCache","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","desc","_interopRequireWildcard","WeakMap","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","push","target","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","lengthWithoutFuture","isHistoryOverflow","pastSliced","slice","newPast","newPresent","newFuture","n"],"mappings":"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","file":"static/js/2.f95ec8a3.chunk.js","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport { createDispatchHook, createSelectorHook, createStoreHook, Provider, } from 'react-redux';\nexport var ReduxContext = React.createContext(null);\nexport var ReduxProvider = function (_a) {\n    var store = _a.store, props = __rest(_a, [\"store\"]);\n    return (React.createElement(Provider, __assign({ store: store, context: ReduxContext }, props)));\n};\nexport var useStore = createStoreHook(ReduxContext);\nexport var useDispatch = createDispatchHook(ReduxContext\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n);\nexport var useSelector = createSelectorHook(ReduxContext);\n//# sourceMappingURL=reduxConnect.js.map","export var SET_DISPLAY_REFERENCE_NODE_ID = 'SET_DISPLAY_REFERENCE_NODE_ID';\nexport var SET_DISPLAY_MODE = 'SET_DISPLAY_MODE';\nexport var SET_PREVIOUS_DISPLAY_MODE = 'SET_PREVIOUS_DISPLAY_MODE';\nexport var DISPLAY_MODE_PREVIEW = 'preview';\nexport var DISPLAY_MODE_LAYOUT = 'layout';\nexport var DISPLAY_MODE_EDIT = 'edit';\nexport var DISPLAY_MODE_INSERT = 'insert';\nexport var DISPLAY_MODE_RESIZING = 'resizing';\nexport var DEFAULT_DISPLAY_MODE = DISPLAY_MODE_EDIT;\nvar setDisplayMode = function (mode, referenceNodeId) { return function () { return ({\n    type: SET_DISPLAY_MODE,\n    ts: new Date(),\n    mode: mode,\n    referenceNodeId: referenceNodeId,\n}); }; };\nexport var setDisplayReferenceNodeId = function (referenceNodeId) { return ({\n    type: SET_DISPLAY_REFERENCE_NODE_ID,\n    ts: new Date(),\n    referenceNodeId: referenceNodeId,\n}); };\n/**\n * Dispatch to switch to arbitrary mode.\n */\nexport var setMode = function (mode, referenceNodeId) { return ({\n    type: SET_DISPLAY_MODE,\n    ts: new Date(),\n    mode: mode,\n    referenceNodeId: referenceNodeId,\n}); };\n/**\n * Dispatch to switch to insert display mode.\n */\nexport var insertMode = setDisplayMode(DISPLAY_MODE_INSERT);\n/**\n * Dispatch to switch to edit display mode.\n */\nexport var editMode = setDisplayMode(DISPLAY_MODE_EDIT);\n/**\n * Dispatch to switch to preview display mode.\n */\nexport var previewMode = setDisplayMode(DISPLAY_MODE_PREVIEW);\n/**\n * Dispatch to switch to layout display mode.\n */\nexport var layoutMode = setDisplayMode(DISPLAY_MODE_LAYOUT);\n/**\n * Dispatch to switch to resize display mode.\n */\nexport var resizeMode = setDisplayMode(DISPLAY_MODE_RESIZING);\n//# sourceMappingURL=display.js.map","/**\n * A list of positions in the layout space.\n */\nexport var PositionEnum;\n(function (PositionEnum) {\n    PositionEnum[\"LEFT_OF\"] = \"left-of\";\n    PositionEnum[\"RIGHT_OF\"] = \"right-of\";\n    PositionEnum[\"ABOVE\"] = \"above\";\n    PositionEnum[\"BELOW\"] = \"below\";\n    PositionEnum[\"INLINE_LEFT\"] = \"inline-left\";\n    PositionEnum[\"INLINE_RIGHT\"] = \"inline-right\";\n})(PositionEnum || (PositionEnum = {}));\n/**\n * Is true if built in production mode.\n */\nexport var isProduction = process.env.NODE_ENV === 'production';\n//# sourceMappingURL=const.js.map","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nimport { isRow } from '../../types/node';\n/** */\nvar findNode = function (nodes, nodeId, ancestors) {\n    var e_1, _a;\n    if (ancestors === void 0) { ancestors = []; }\n    try {\n        for (var nodes_1 = __values(nodes), nodes_1_1 = nodes_1.next(); !nodes_1_1.done; nodes_1_1 = nodes_1.next()) {\n            var node = nodes_1_1.value;\n            if (node.id === nodeId) {\n                return {\n                    node: node,\n                    ancestors: ancestors,\n                };\n            }\n            // else search children\n            if (isRow(node) && node.cells) {\n                var found = findNode(node.cells, nodeId, __spread([node], ancestors));\n                if (found) {\n                    return found;\n                }\n            }\n            else if (!isRow(node) && node.rows) {\n                var found = findNode(node.rows, nodeId, __spread([node], ancestors));\n                if (found) {\n                    return found;\n                }\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (nodes_1_1 && !nodes_1_1.done && (_a = nodes_1.return)) _a.call(nodes_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return null;\n};\n/*\nlet sum = 0;\nlet missum = 0;\nconst end = (start, hit) => {\n  const now = performance.now();\n  const diff = now - start;\n  sum += diff;\n  if (!hit) missum++;\n  console.log('time', hit ? '!' : '?', missum, diff, sum);\n};\n*/\nexport var findNodeInState = function (state, nodeId) {\n    var _a, _b;\n    // const now = performance.now();\n    // POOR mans node cache\n    // it gets removed every reduce, so we don't have to clear it manually\n    if (!state.reactPage.__nodeCache) {\n        state.reactPage.__nodeCache = {};\n    }\n    if (state.reactPage.__nodeCache[nodeId]) {\n        //end(now, true);\n        return state.reactPage.__nodeCache[nodeId];\n    }\n    var result = findNode((_b = (_a = state.reactPage.values) === null || _a === void 0 ? void 0 : _a.present) === null || _b === void 0 ? void 0 : _b.rows, nodeId);\n    state.reactPage.__nodeCache[nodeId] = result;\n    //end(now, false);\n    return result;\n};\nexport var currentValue = function (state) { var _a, _b; return (_b = (_a = state === null || state === void 0 ? void 0 : state.reactPage) === null || _a === void 0 ? void 0 : _a.values) === null || _b === void 0 ? void 0 : _b.present; };\nexport var selectNode = function (state, nodeId) {\n    var found = findNodeInState(state, nodeId);\n    return found;\n};\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { generateIds } from '../helpers';\nexport var CELL_UPDATE_IS_DRAFT = 'CELL_UPDATE_IS_DRAFT';\nexport var CELL_UPDATE_DATA = 'CELL_UPDATE_DATA';\nexport var CELL_REMOVE = 'CELL_REMOVE';\nexport var CELL_RESIZE = 'CELL_RESIZE';\nexport var CELL_FOCUS = 'CELL_FOCUS';\nexport var CELL_BLUR = 'CELL_BLUR';\nexport var CELL_BLUR_ALL = 'CELL_BLUR_ALL';\nexport var updateCellIsDraft = function (id, isDraft, lang) {\n    if (isDraft === void 0) { isDraft = false; }\n    if (lang === void 0) { lang = null; }\n    return ({\n        type: CELL_UPDATE_IS_DRAFT,\n        ts: new Date(),\n        id: id,\n        isDraft: isDraft,\n        lang: lang,\n    });\n};\nexport var updateCellData = function (id) { return function (data, options) { return (__assign({ type: CELL_UPDATE_DATA, ts: new Date(), id: id,\n    data: data }, options)); }; };\nexport var removeCell = function (id, ids) {\n    if (ids === void 0) { ids = null; }\n    return ({\n        type: CELL_REMOVE,\n        ts: new Date(),\n        id: id,\n        ids: ids ? ids : generateIds(),\n    });\n};\nexport var resizeCell = function (id) { return function (size) {\n    if (size === void 0) { size = 1; }\n    return ({\n        type: CELL_RESIZE,\n        ts: new Date(),\n        id: id,\n        size: size,\n    });\n}; };\n/**\n * Dispatch to focus a cell.\n */\nexport var focusCell = function (id, scrollToCell, source) {\n    if (scrollToCell === void 0) { scrollToCell = false; }\n    if (source === void 0) { source = undefined; }\n    return ({\n        type: CELL_FOCUS,\n        ts: new Date(),\n        id: id,\n        scrollToCell: scrollToCell,\n        source: source,\n    });\n};\n/**\n * Dispatch to blur a cell.\n */\nexport var blurCell = function (id) { return ({\n    type: CELL_BLUR,\n    ts: new Date(),\n    id: id,\n}); };\n/**\n * Dispatch to blur all cells. For example when clicking on document body.\n */\nexport var blurAllCells = function () { return ({\n    type: CELL_BLUR_ALL,\n    ts: new Date(),\n}); };\nexport var coreActions = {\n    blurAllCells: blurAllCells,\n    blurCell: blurCell,\n    focusCell: focusCell,\n    resizeCell: resizeCell,\n    removeCell: removeCell,\n    updateCellData: updateCellData,\n    updateCellIsDraft: updateCellIsDraft,\n};\n//# sourceMappingURL=core.js.map","import { createId } from '../utils/createId';\nexport var generateIds = function () {\n    return {\n        cell: createId(),\n        item: createId(),\n        others: [createId(), createId(), createId()],\n    };\n};\n//# sourceMappingURL=helpers.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { createId } from '../../utils/createId';\nimport { getChildCellPlugins } from '../../utils/getAvailablePlugins';\nimport { getCellData } from '../../utils/getCellData';\nimport { removeUndefinedProps } from '../../utils/removeUndefinedProps';\nimport { editMode } from '../display';\nimport { generateIds } from '../helpers';\nimport { focusCell } from './core';\nexport var CELL_INSERT_ABOVE = 'CELL_INSERT_ABOVE';\nexport var CELL_INSERT_BELOW = 'CELL_INSERT_BELOW';\nexport var CELL_INSERT_LEFT_OF = 'CELL_INSERT_LEFT_OF';\nexport var CELL_INSERT_RIGHT_OF = 'CELL_INSERT_RIGHT_OF';\nexport var CELL_INSERT_INLINE_LEFT = 'CELL_INSERT_INLINE_LEFT';\nexport var CELL_INSERT_INLINE_RIGHT = 'CELL_INSERT_INLINE_RIGHT';\nexport var CELL_INSERT_AT_END = 'CELL_INSERT_AT_END';\nexport var CELL_INSERT_AS_NEW_ROW = 'CELL_INSERT_AS_NEW_ROW';\nexport var createRow = function (partialRow, options) {\n    var _a;\n    if (Array.isArray(partialRow)) {\n        return {\n            id: createId(),\n            cells: partialRow.map(function (c) { return createCell(c, options); }),\n        };\n    }\n    return removeUndefinedProps(__assign(__assign({ id: createId() }, partialRow), { cells: (_a = partialRow.cells) === null || _a === void 0 ? void 0 : _a.map(function (c) { return createCell(c, options); }) }));\n};\nexport var createCell = function (partialCell, options) {\n    var _a;\n    var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n    var cellPlugins = options.cellPlugins, lang = options.lang;\n    var pluginId = partialCell.plugin &&\n        (typeof partialCell.plugin == 'string'\n            ? partialCell.plugin\n            : partialCell.plugin.id);\n    var plugin = pluginId && cellPlugins.find(function (p) { return p.id === pluginId; });\n    var partialRows = ((_b = partialCell.rows) === null || _b === void 0 ? void 0 : _b.length) > 0\n        ? partialCell.rows\n        : (_d = (_c = plugin === null || plugin === void 0 ? void 0 : plugin.createInitialChildren) === null || _c === void 0 ? void 0 : _c.call(plugin)) !== null && _d !== void 0 ? _d : [];\n    var dataI18n = __assign((_a = {}, _a[lang] = (_j = (_g = (_e = partialCell === null || partialCell === void 0 ? void 0 : partialCell.data) !== null && _e !== void 0 ? _e : (_f = plugin === null || plugin === void 0 ? void 0 : plugin.createInitialData) === null || _f === void 0 ? void 0 : _f.call(plugin, partialCell)) !== null && _g !== void 0 ? _g : (_h = plugin === null || plugin === void 0 ? void 0 : plugin.createInitialState) === null || _h === void 0 ? void 0 : _h.call(plugin, partialCell)) !== null && _j !== void 0 ? _j : null, _a), ((_k = partialCell.dataI18n) !== null && _k !== void 0 ? _k : {}));\n    return removeUndefinedProps({\n        id: (_l = partialCell.id) !== null && _l !== void 0 ? _l : createId(),\n        isDraft: partialCell.isDraft,\n        isDraftI18n: partialCell.isDraftI18n,\n        inline: partialCell.inline,\n        size: partialCell.size || 12,\n        hasInlineNeighbour: partialCell.hasInlineNeighbour,\n        plugin: plugin\n            ? {\n                id: plugin.id,\n                version: plugin.version,\n            }\n            : undefined,\n        rows: partialRows === null || partialRows === void 0 ? void 0 : partialRows.map(function (r) {\n            return createRow(r, {\n                lang: lang,\n                cellPlugins: getChildCellPlugins(cellPlugins, {\n                    pluginId: pluginId,\n                    data: getCellData({\n                        dataI18n: dataI18n,\n                    }, lang),\n                }),\n            });\n        }),\n        dataI18n: dataI18n,\n    });\n};\nvar insert = function (type) { return function (options) { return function (partialCell, _a, level, ids) {\n    var _b;\n    var hoverId = _a.id, inline = _a.inline, hasInlineNeighbour = _a.hasInlineNeighbour, ancestorIds = _a.ancestorIds;\n    if (level === void 0) { level = 0; }\n    if (ids === void 0) { ids = null; }\n    var l = level;\n    var cell = createCell(partialCell, options);\n    switch (type) {\n        case CELL_INSERT_ABOVE:\n        case CELL_INSERT_BELOW: {\n            if ((inline || hasInlineNeighbour) && level < 1) {\n                l = 1;\n            }\n            break;\n        }\n        case CELL_INSERT_LEFT_OF:\n        case CELL_INSERT_RIGHT_OF: {\n            if ((inline || hasInlineNeighbour) && level < 1) {\n                l = 1;\n            }\n            break;\n        }\n        default:\n    }\n    var insertAction = {\n        type: type,\n        ts: new Date(),\n        item: cell,\n        hoverId: level === 0 ? hoverId : (_b = ancestorIds[Math.max(level - 1)]) !== null && _b !== void 0 ? _b : hoverId,\n        level: l,\n        // FIXME: item handling is a bit confusing,\n        // we now give some of them a name like \"cell\" or \"item\",\n        // but the purpose of the others is unclear\n        ids: ids ? ids : generateIds(),\n    };\n    return function (dispatch) {\n        dispatch(insertAction);\n        // FIXME: checking if an item is new or just moved around is a bit awkward\n        // FIXME: this doesn't work when duplicating, I've added an option to focus after insert\n        var isNew = !partialCell.id;\n        if (isNew || options.focusAfter) {\n            dispatch(editMode());\n            setTimeout(function () {\n                dispatch(focusCell(insertAction.ids.item, true));\n            }, 300);\n        }\n    };\n}; }; };\n/**\n * Insert a cell below of the hovering cell.\n */\nexport var insertCellBelow = insert(CELL_INSERT_BELOW);\n/**\n * Insert a cell above of the hovering cell.\n */\nexport var insertCellAbove = insert(CELL_INSERT_ABOVE);\n/**\n * Insert a cell right of the hovering cell.\n */\nexport var insertCellRightOf = insert(CELL_INSERT_RIGHT_OF);\n/**\n * Insert a cell left of the hovering cell.\n */\nexport var insertCellLeftOf = insert(CELL_INSERT_LEFT_OF);\n/**\n * Insert a cell inside the hovering cell, on the left.\n */\nexport var insertCellLeftInline = insert(CELL_INSERT_INLINE_LEFT);\n/**\n * Insert a cell inside the hovering cell, on the right.\n */\nexport var insertCellRightInline = insert(CELL_INSERT_INLINE_RIGHT);\nexport var insertCellAtTheEnd = insert(CELL_INSERT_AT_END);\nexport var insertCellNewAsNewRow = insert(CELL_INSERT_AS_NEW_ROW);\n// set new ids recursivly\nvar newIds = function (_a) {\n    var id = _a.id, item = __rest(_a, [\"id\"]);\n    return __assign(__assign({}, item), { dataI18n: item.dataI18n ? JSON.parse(JSON.stringify(item.dataI18n)) : {}, id: createId(), rows: item.rows\n            ? item.rows.map(function (row) { return (__assign(__assign({}, row), { id: createId(), cells: row.cells ? row.cells.map(newIds) : undefined })); })\n            : undefined });\n};\nexport var duplicateCell = function (options) { return function (item) {\n    var _a;\n    return insertCellBelow(options)(newIds(item), {\n        ancestorIds: [],\n        id: item.id,\n        hasInlineNeighbour: item.hasInlineNeighbour,\n        inline: item.inline,\n        levels: null,\n        pluginId: (_a = item.plugin) === null || _a === void 0 ? void 0 : _a.id,\n    });\n}; };\nexport var insertActions = {\n    insertCellRightInline: insertCellRightInline,\n    insertCellLeftInline: insertCellLeftInline,\n    insertCellLeftOf: insertCellLeftOf,\n    insertCellRightOf: insertCellRightOf,\n    insertCellAbove: insertCellAbove,\n    insertCellBelow: insertCellBelow,\n    duplicateCell: duplicateCell,\n    insertCellAtTheEnd: insertCellAtTheEnd,\n    insert: insert,\n};\n//# sourceMappingURL=insert.js.map","export var SET_LANG = 'SET_LANG';\nexport var setLang = function (lang) { return ({\n    type: SET_LANG,\n    lang: lang,\n}); };\n//# sourceMappingURL=setting.js.map","export var getLang = function (_a) {\n    var settings = _a.reactPage.settings;\n    return settings.lang;\n};\n//# sourceMappingURL=setting.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React, { createContext, useContext } from 'react';\nimport { EditorContext } from '../../EditorStore';\nimport { useSelector } from '../../reduxConnect';\nimport { getLang } from '../../selector/setting';\nimport { normalizeCellSpacing } from '../../utils/getCellSpacing';\nimport NoopProvider from '../Cell/NoopProvider';\n/**\n * @returns the store object of the current editor. Contains the redux store.\n */\nexport var useEditorStore = function () { return useContext(EditorContext); };\nexport var OptionsContext = createContext({\n    allowMoveInEditMode: true,\n    allowResizeInEditMode: true,\n    cellPlugins: [],\n    languages: [],\n    pluginsWillChange: false,\n});\n/**\n * @returns the options object of the current Editor. @see Options type for more information\n */\nexport var useOptions = function () { return useContext(OptionsContext); };\n/**\n * @returns the an object with a single `t` function for ui translations\n */\nexport var useUiTranslator = function () {\n    var uiTranslator = useOptions().uiTranslator;\n    return {\n        t: function (key) {\n            var _a;\n            return (_a = uiTranslator === null || uiTranslator === void 0 ? void 0 : uiTranslator(key)) !== null && _a !== void 0 ? _a : key;\n        },\n    };\n};\n/**\n * @returns the current language\n */\nexport var useLang = function () {\n    return useSelector(getLang);\n};\n/**\n * @returns cell spacing for the current cell sub-tree\n */\nexport var useCellSpacing = function () {\n    return normalizeCellSpacing(useOptions().cellSpacing);\n};\n/**\n * @returns a Provider/value tuple that can be used to override cell spacing for a subtree of cells\n */\nexport var useCellSpacingProvider = function (cellSpacing) {\n    var options = useOptions();\n    var value = React.useMemo(function () { return (__assign(__assign({}, options), { cellSpacing: normalizeCellSpacing(cellSpacing) })); }, [options, JSON.stringify(cellSpacing)]);\n    if (typeof cellSpacing === 'undefined' || cellSpacing == null) {\n        return [NoopProvider, undefined];\n    }\n    else {\n        return [OptionsContext.Provider, value];\n    }\n};\n//# sourceMappingURL=options.js.map","import createStore from './store';\nimport { setLang } from './actions/setting';\nimport { findNodeInState } from './selector/editable';\nimport { createContext } from 'react';\nimport { createId } from './utils/createId';\nexport var EditorContext = createContext(null);\nvar EditorStore = /** @class */ (function () {\n    function EditorStore(_a) {\n        var _this = this;\n        var _b = _a.middleware, middleware = _b === void 0 ? [] : _b, store = _a.store, initialState = _a.initialState;\n        this.getNodeWithAncestors = function (nodeId) {\n            return findNodeInState(_this.store.getState(), nodeId);\n        };\n        this.getNode = function (nodeId) {\n            var _a;\n            return (_a = findNodeInState(_this.store.getState(), nodeId)) === null || _a === void 0 ? void 0 : _a.node;\n        };\n        this.store = store || createStore(initialState, middleware);\n        this.middleware = middleware;\n    }\n    EditorStore.prototype.setLang = function (lang) {\n        this.store.dispatch(setLang(lang));\n    };\n    return EditorStore;\n}());\nexport var createEmptyState = function () {\n    return ({ id: createId(), rows: [] });\n};\nexport default EditorStore;\n//# sourceMappingURL=EditorStore.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducer';\nimport { isProduction } from './const';\n/**\n * Returns a new redux store.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport default (function (initialState, middleware) {\n    if (middleware === void 0) { middleware = []; }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var v = !isProduction &&\n        typeof window === 'object' &&\n        window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n        ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\n        : compose;\n    return createStore(rootReducer, initialState, v(applyMiddleware.apply(void 0, __spread(middleware, [thunk]))));\n});\n//# sourceMappingURL=store.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"ActionTypes\", {\n  enumerable: true,\n  get: function get() {\n    return _actions.ActionTypes;\n  }\n});\nObject.defineProperty(exports, \"ActionCreators\", {\n  enumerable: true,\n  get: function get() {\n    return _actions.ActionCreators;\n  }\n});\nObject.defineProperty(exports, \"parseActions\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.parseActions;\n  }\n});\nObject.defineProperty(exports, \"isHistory\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.isHistory;\n  }\n});\nObject.defineProperty(exports, \"includeAction\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.includeAction;\n  }\n});\nObject.defineProperty(exports, \"excludeAction\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.excludeAction;\n  }\n});\nObject.defineProperty(exports, \"combineFilters\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.combineFilters;\n  }\n});\nObject.defineProperty(exports, \"groupByActionTypes\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.groupByActionTypes;\n  }\n});\nObject.defineProperty(exports, \"newHistory\", {\n  enumerable: true,\n  get: function get() {\n    return _helpers.newHistory;\n  }\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _reducer[\"default\"];\n  }\n});\n\nvar _actions = require(\"./actions\");\n\nvar _helpers = require(\"./helpers\");\n\nvar _reducer = _interopRequireDefault(require(\"./reducer\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ActionCreators = exports.ActionTypes = void 0;\nvar ActionTypes = {\n  UNDO: '@@redux-undo/UNDO',\n  REDO: '@@redux-undo/REDO',\n  JUMP_TO_FUTURE: '@@redux-undo/JUMP_TO_FUTURE',\n  JUMP_TO_PAST: '@@redux-undo/JUMP_TO_PAST',\n  JUMP: '@@redux-undo/JUMP',\n  CLEAR_HISTORY: '@@redux-undo/CLEAR_HISTORY'\n};\nexports.ActionTypes = ActionTypes;\nvar ActionCreators = {\n  undo: function undo() {\n    return {\n      type: ActionTypes.UNDO\n    };\n  },\n  redo: function redo() {\n    return {\n      type: ActionTypes.REDO\n    };\n  },\n  jumpToFuture: function jumpToFuture(index) {\n    return {\n      type: ActionTypes.JUMP_TO_FUTURE,\n      index: index\n    };\n  },\n  jumpToPast: function jumpToPast(index) {\n    return {\n      type: ActionTypes.JUMP_TO_PAST,\n      index: index\n    };\n  },\n  jump: function jump(index) {\n    return {\n      type: ActionTypes.JUMP,\n      index: index\n    };\n  },\n  clearHistory: function clearHistory() {\n    return {\n      type: ActionTypes.CLEAR_HISTORY\n    };\n  }\n};\nexports.ActionCreators = ActionCreators;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseActions = parseActions;\nexports.isHistory = isHistory;\nexports.includeAction = includeAction;\nexports.excludeAction = excludeAction;\nexports.combineFilters = combineFilters;\nexports.groupByActionTypes = groupByActionTypes;\nexports.newHistory = newHistory;\n\n// parseActions helper: takes a string (or array)\n//                      and makes it an array if it isn't yet\nfunction parseActions(rawActions) {\n  var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (Array.isArray(rawActions)) {\n    return rawActions;\n  } else if (typeof rawActions === 'string') {\n    return [rawActions];\n  }\n\n  return defaultValue;\n} // isHistory helper: check for a valid history object\n\n\nfunction isHistory(history) {\n  return typeof history.present !== 'undefined' && typeof history.future !== 'undefined' && typeof history.past !== 'undefined' && Array.isArray(history.future) && Array.isArray(history.past);\n} // includeAction helper: whitelist actions to be added to the history\n\n\nfunction includeAction(rawActions) {\n  var actions = parseActions(rawActions);\n  return function (action) {\n    return actions.indexOf(action.type) >= 0;\n  };\n} // excludeAction helper: blacklist actions from being added to the history\n\n\nfunction excludeAction(rawActions) {\n  var actions = parseActions(rawActions);\n  return function (action) {\n    return actions.indexOf(action.type) < 0;\n  };\n} // combineFilters helper: combine multiple filters to one\n\n\nfunction combineFilters() {\n  for (var _len = arguments.length, filters = new Array(_len), _key = 0; _key < _len; _key++) {\n    filters[_key] = arguments[_key];\n  }\n\n  return filters.reduce(function (prev, curr) {\n    return function (action, currentState, previousHistory) {\n      return prev(action, currentState, previousHistory) && curr(action, currentState, previousHistory);\n    };\n  }, function () {\n    return true;\n  });\n}\n\nfunction groupByActionTypes(rawActions) {\n  var actions = parseActions(rawActions);\n  return function (action) {\n    return actions.indexOf(action.type) >= 0 ? action.type : null;\n  };\n}\n\nfunction newHistory(past, present, future) {\n  var group = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  return {\n    past: past,\n    present: present,\n    future: future,\n    group: group,\n    _latestUnfiltered: present,\n    index: past.length,\n    limit: past.length + future.length + 1\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.set = set;\nexports.start = start;\nexports.end = end;\nexports.log = log;\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nvar __DEBUG__;\n\nvar displayBuffer;\nvar colors = {\n  prevState: '#9E9E9E',\n  action: '#03A9F4',\n  nextState: '#4CAF50'\n};\n/* istanbul ignore next: debug messaging is not tested */\n\nfunction initBuffer() {\n  displayBuffer = {\n    header: [],\n    prev: [],\n    action: [],\n    next: [],\n    msgs: []\n  };\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction printBuffer() {\n  var _displayBuffer = displayBuffer,\n      header = _displayBuffer.header,\n      prev = _displayBuffer.prev,\n      next = _displayBuffer.next,\n      action = _displayBuffer.action,\n      msgs = _displayBuffer.msgs;\n\n  if (console.group) {\n    var _console, _console2, _console3, _console4, _console5;\n\n    (_console = console).groupCollapsed.apply(_console, _toConsumableArray(header));\n\n    (_console2 = console).log.apply(_console2, _toConsumableArray(prev));\n\n    (_console3 = console).log.apply(_console3, _toConsumableArray(action));\n\n    (_console4 = console).log.apply(_console4, _toConsumableArray(next));\n\n    (_console5 = console).log.apply(_console5, _toConsumableArray(msgs));\n\n    console.groupEnd();\n  } else {\n    var _console6, _console7, _console8, _console9, _console10;\n\n    (_console6 = console).log.apply(_console6, _toConsumableArray(header));\n\n    (_console7 = console).log.apply(_console7, _toConsumableArray(prev));\n\n    (_console8 = console).log.apply(_console8, _toConsumableArray(action));\n\n    (_console9 = console).log.apply(_console9, _toConsumableArray(next));\n\n    (_console10 = console).log.apply(_console10, _toConsumableArray(msgs));\n  }\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction colorFormat(text, color, obj) {\n  return [\"%c\".concat(text), \"color: \".concat(color, \"; font-weight: bold\"), obj];\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction start(action, state) {\n  initBuffer();\n\n  if (__DEBUG__) {\n    if (console.group) {\n      displayBuffer.header = ['%credux-undo', 'font-style: italic', 'action', action.type];\n      displayBuffer.action = colorFormat('action', colors.action, action);\n      displayBuffer.prev = colorFormat('prev history', colors.prevState, state);\n    } else {\n      displayBuffer.header = ['redux-undo action', action.type];\n      displayBuffer.action = ['action', action];\n      displayBuffer.prev = ['prev history', state];\n    }\n  }\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction end(nextState) {\n  if (__DEBUG__) {\n    if (console.group) {\n      displayBuffer.next = colorFormat('next history', colors.nextState, nextState);\n    } else {\n      displayBuffer.next = ['next history', nextState];\n    }\n\n    printBuffer();\n  }\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction log() {\n  if (__DEBUG__) {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    displayBuffer.msgs = displayBuffer.msgs.concat([].concat(args, ['\\n']));\n  }\n}\n/* istanbul ignore next: debug messaging is not tested */\n\n\nfunction set(debug) {\n  __DEBUG__ = debug;\n}","import { generateIds } from './helpers';\nexport var UPDATE_VALUE = 'UPDATE_VALUE';\nexport var updateValue = function (value) { return ({\n    type: UPDATE_VALUE,\n    ts: new Date(),\n    value: value,\n    ids: generateIds(),\n}); };\n//# sourceMappingURL=value.js.map","/* eslint-disable @typescript-eslint/ban-types */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nimport { CELL_INSERT_ABOVE, CELL_INSERT_BELOW, CELL_INSERT_INLINE_LEFT, CELL_INSERT_INLINE_RIGHT, CELL_INSERT_LEFT_OF, CELL_INSERT_RIGHT_OF, CELL_REMOVE, CELL_RESIZE, CELL_UPDATE_DATA, CELL_UPDATE_IS_DRAFT, CELL_INSERT_AT_END, CELL_INSERT_AS_NEW_ROW, } from '../../actions/cell';\nimport { createId } from '../../utils/createId';\nimport { removeUndefinedProps } from '../../utils/removeUndefinedProps';\nimport { flatten, optimizeCell, optimizeCells, optimizeRow, optimizeRows, } from './helper/optimize';\nimport { resizeCells } from './helper/sizing';\nvar cell = function (s, a, depth) {\n    return optimizeCell((function (state, action) {\n        var _a, _b;\n        var _c, _d, _e;\n        var reduce = function () {\n            return removeUndefinedProps(__assign(__assign({}, state), { rows: rows(state.rows, action, depth + 1) }));\n        };\n        switch (action.type) {\n            case CELL_UPDATE_IS_DRAFT:\n                if (action.id === state.id) {\n                    var reduced = reduce();\n                    if (action.lang) {\n                        return __assign(__assign({}, reduced), { isDraftI18n: __assign(__assign({}, ((_c = reduced.isDraftI18n) !== null && _c !== void 0 ? _c : {})), (_a = {}, _a[action.lang] = action.isDraft, _a)) });\n                    }\n                    else {\n                        return __assign(__assign({}, reduced), { isDraft: action.isDraft });\n                    }\n                }\n                return reduce();\n            case CELL_UPDATE_DATA:\n                if (action.id === state.id) {\n                    // If this cell is being updated, set the data\n                    var reduced = reduce();\n                    // copy because we mutate afterwards with delete\n                    var newI18nData = __assign({}, ((_d = reduced.dataI18n) !== null && _d !== void 0 ? _d : {}));\n                    var emptyValue = action.data === null;\n                    if (action.lang && emptyValue) {\n                        newI18nData === null || newI18nData === void 0 ? true : delete newI18nData[action.lang];\n                    }\n                    return __assign(__assign({}, reduced), { dataI18n: __assign(__assign({}, (newI18nData !== null && newI18nData !== void 0 ? newI18nData : {})), (!emptyValue\n                            ? (_b = {}, _b[action.lang] = action.data, _b) : {})) });\n                }\n                return reduce();\n            case CELL_INSERT_ABOVE:\n                if (action.hoverId === state.id) {\n                    return {\n                        id: action.ids.cell,\n                        rows: rows([\n                            {\n                                id: action.ids.others[0],\n                                cells: [\n                                    __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                                ],\n                            },\n                            {\n                                id: action.ids.others[1],\n                                cells: [__assign(__assign({}, reduce()), { id: action.ids.others[2] })],\n                            },\n                        ], __assign(__assign({}, action), { hoverId: null }), depth + 1),\n                    };\n                }\n                return reduce();\n            case CELL_INSERT_BELOW:\n                if (action.hoverId === state.id) {\n                    return {\n                        id: action.ids.cell,\n                        rows: rows([\n                            {\n                                id: action.ids.others[0],\n                                cells: [__assign(__assign({}, reduce()), { id: action.ids.others[1] })],\n                            },\n                            {\n                                id: action.ids.others[2],\n                                cells: [\n                                    __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                                ],\n                            },\n                        ], __assign(__assign({}, action), { hoverId: null }), depth + 1),\n                    };\n                }\n                return reduce();\n            case CELL_INSERT_AS_NEW_ROW: {\n                if (action.hoverId === state.id) {\n                    return __assign(__assign({}, state), { rows: __spread(((_e = state.rows) !== null && _e !== void 0 ? _e : []), [\n                            {\n                                id: action.ids.others[1],\n                                cells: [\n                                    __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                                ],\n                            },\n                        ]) });\n                }\n                return reduce();\n            }\n            default:\n                return reduce();\n        }\n    })(s, a));\n};\nvar createEmptyCell = function () { return ({\n    id: createId(),\n    rows: [\n        {\n            id: createId(),\n            cells: [],\n        },\n    ],\n}); };\nexport var cells = function (state, action, depth) {\n    if (state === void 0) { state = []; }\n    if (depth === void 0) { depth = 0; }\n    var newCells = depth === 0 && state.length === 0 ? [createEmptyCell()] : state;\n    switch (action.type) {\n        case CELL_RESIZE:\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            newCells = resizeCells(newCells, action);\n            break;\n        case CELL_INSERT_AT_END:\n        case CELL_INSERT_AS_NEW_ROW:\n        case CELL_INSERT_BELOW:\n        case CELL_INSERT_ABOVE:\n            newCells = newCells.filter(function (c) { return c.id !== action.item.id; }); // this removes the cell if it already exists\n            break;\n        case CELL_INSERT_LEFT_OF:\n            newCells = newCells\n                .filter(function (c) { return c.id !== action.item.id; }) // this removes the cell if it already exists\n                .map(function (c) {\n                return action.hoverId === c.id\n                    ? [\n                        __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                        __assign(__assign({}, c), { id: action.ids.others[0] }),\n                    ]\n                    : [c];\n            })\n                .reduce(flatten, []);\n            break;\n        case CELL_INSERT_RIGHT_OF:\n            newCells = newCells\n                .filter(function (c) { return c.id !== action.item.id; }) // this removes the cell if it already exists\n                .map(function (c) {\n                return action.hoverId === c.id\n                    ? [\n                        __assign(__assign({}, c), { id: action.ids.others[0] }),\n                        __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                    ]\n                    : [c];\n            })\n                .reduce(flatten, []);\n            break;\n        case CELL_INSERT_INLINE_RIGHT:\n        case CELL_INSERT_INLINE_LEFT:\n            newCells = newCells\n                .filter(function (c) { return c.id !== action.item.id; }) // this removes the cell if it already exists\n                .map(function (c) {\n                if (action.hoverId === c.id) {\n                    return [\n                        {\n                            id: action.ids.cell,\n                            rows: [\n                                {\n                                    id: action.ids.others[0],\n                                    cells: [\n                                        __assign(__assign({}, action.item), { inline: action.type === CELL_INSERT_INLINE_RIGHT\n                                                ? 'right'\n                                                : 'left', id: action.ids.item, size: 0 }),\n                                        __assign(__assign({}, c), { id: action.ids.others[1], inline: null, hasInlineNeighbour: action.ids.item, size: 0 }),\n                                    ],\n                                },\n                            ],\n                        },\n                    ];\n                }\n                return [c];\n            })\n                .reduce(flatten, []);\n            break;\n        case CELL_REMOVE:\n            newCells = newCells.filter(function (_a) {\n                var id = _a.id;\n                return id !== action.id;\n            });\n            break;\n    }\n    var reducedCells = newCells.map(function (c) { return cell(c, action, depth); });\n    return optimizeCells(reducedCells);\n};\nvar row = function (s, a, depth) {\n    return optimizeRow((function (state, action) {\n        var reduce = function () { return (__assign(__assign({}, state), { cells: cells(state.cells, action, depth + 1) })); };\n        switch (action.type) {\n            case CELL_INSERT_LEFT_OF:\n                if (action.hoverId !== state.id) {\n                    return reduce();\n                }\n                return __assign(__assign({}, state), { cells: cells(__spread([\n                        __assign(__assign({}, action.item), { id: action.ids.item, inline: null })\n                    ], state.cells), __assign(__assign({}, action), { hoverId: null }), depth + 1) });\n            case CELL_INSERT_RIGHT_OF:\n                if (action.hoverId !== state.id) {\n                    return reduce();\n                }\n                return __assign(__assign({}, state), { cells: cells(__spread(state.cells, [\n                        __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                    ]), __assign(__assign({}, action), { hoverId: null }), depth + 1) });\n            /*case CELL_DRAG_HOVER:\n              if (action.hoverId === state.id) {\n                return { ...reduce(), hoverPosition: action.position };\n              }\n              return reduce();\n              */\n            default:\n                return reduce();\n        }\n    })(s, a));\n};\nexport var rows = function (s, a, depth) {\n    if (s === void 0) { s = []; }\n    if (depth === void 0) { depth = 0; }\n    return optimizeRows(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (function (state, action) {\n        var reduce = function () { return state.map(function (r) { return row(r, action, depth); }); };\n        switch (action.type) {\n            case CELL_INSERT_ABOVE:\n                return state\n                    .map(function (r) {\n                    return action.hoverId === r.id\n                        ? [\n                            {\n                                cells: [\n                                    __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                                ],\n                                id: action.ids.others[0],\n                            },\n                            __assign(__assign({}, r), { id: action.ids.others[1] }),\n                        ]\n                        : [r];\n                })\n                    .reduce(flatten, [])\n                    .map(function (r) { return row(r, action, depth); });\n            case CELL_INSERT_BELOW:\n                return state\n                    .map(function (r) {\n                    return action.hoverId === r.id\n                        ? [\n                            __assign(__assign({}, r), { id: action.ids.others[0] }),\n                            {\n                                cells: [\n                                    __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                                ],\n                                id: action.ids.others[1],\n                            },\n                        ]\n                        : [r];\n                })\n                    .reduce(flatten, [])\n                    .map(function (r) { return row(r, action, depth); });\n            case CELL_INSERT_AT_END: {\n                var newRows = depth !== 0\n                    ? state\n                    : __spread(state, [\n                        {\n                            cells: [\n                                __assign(__assign({}, action.item), { id: action.ids.item, inline: null }),\n                            ],\n                            id: action.ids.others[1],\n                        },\n                    ]);\n                return newRows.map(function (r) { return row(r, action, depth); });\n            }\n            default:\n                return reduce();\n        }\n    })(s, a));\n};\n//# sourceMappingURL=tree.js.map","import undoable from 'redux-undo';\nimport { set } from 'redux-undo/lib/debug';\nimport { CELL_REMOVE, CELL_RESIZE, CELL_UPDATE_DATA, } from '../../actions/cell/core';\nimport { CELL_INSERT_ABOVE, CELL_INSERT_AS_NEW_ROW, CELL_INSERT_AT_END, CELL_INSERT_BELOW, CELL_INSERT_INLINE_LEFT, CELL_INSERT_INLINE_RIGHT, CELL_INSERT_LEFT_OF, CELL_INSERT_RIGHT_OF, } from '../../actions/cell/insert';\nimport { UPDATE_VALUE } from '../../actions/value';\nimport { isProduction } from '../../const';\nimport { value } from '../value';\nif (!isProduction) {\n    set(true);\n}\nexport var values = undoable(value, {\n    filter: function filterState(action, currentState, previousHistory) {\n        var _a;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if ((_a = action) === null || _a === void 0 ? void 0 : _a.notUndoable) {\n            return false;\n        }\n        var undoable = [\n            UPDATE_VALUE,\n            CELL_UPDATE_DATA,\n            CELL_REMOVE,\n            CELL_RESIZE,\n            CELL_INSERT_ABOVE,\n            CELL_INSERT_BELOW,\n            CELL_INSERT_LEFT_OF,\n            CELL_INSERT_RIGHT_OF,\n            CELL_INSERT_INLINE_LEFT,\n            CELL_INSERT_INLINE_RIGHT,\n            CELL_INSERT_AT_END,\n            CELL_INSERT_AS_NEW_ROW,\n        ].indexOf(action.type) >= 0;\n        return undoable;\n    },\n    neverSkipReducer: true,\n    syncFilter: true,\n});\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { setAllSizesAndOptimize } from './helper/setAllSizesAndOptimize';\nimport { rows } from './tree';\nexport var value = function (state, action) {\n    switch (action.type) {\n        case 'UPDATE_VALUE': {\n            return action.value;\n        }\n    }\n    var newRows = (state === null || state === void 0 ? void 0 : state.rows) ? setAllSizesAndOptimize(rows(state.rows, action, 0))\n        : [];\n    return __assign(__assign({}, state), { rows: newRows });\n};\n//# sourceMappingURL=index.js.map","import { combineReducers } from 'redux';\nimport { values } from './values';\nimport { display } from './display';\nimport { focus } from './focus';\nimport { hover } from './hover';\nimport { settings } from './settings';\nvar reducer = combineReducers({\n    values: values,\n    display: display,\n    focus: focus,\n    settings: settings,\n    hover: hover,\n    __nodeCache: function () { return null; },\n});\nexport { reducer };\nexport default combineReducers({ reactPage: reducer });\nexport function initialState(value, lang) {\n    return {\n        reactPage: {\n            __nodeCache: {},\n            hover: null,\n            focus: null,\n            display: {\n                mode: 'edit',\n            },\n            settings: {\n                lang: lang,\n            },\n            values: {\n                past: [],\n                present: value,\n                future: [],\n            },\n        },\n    };\n}\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { CELL_BLUR_ALL } from '../../actions/cell';\nimport { DEFAULT_DISPLAY_MODE, SET_DISPLAY_MODE, SET_DISPLAY_REFERENCE_NODE_ID, } from '../../actions/display';\nexport var display = function (state, action) {\n    if (state === void 0) { state = {\n        mode: DEFAULT_DISPLAY_MODE,\n    }; }\n    switch (action.type) {\n        case SET_DISPLAY_REFERENCE_NODE_ID:\n            return __assign(__assign({}, state), { referenceNodeId: action.referenceNodeId });\n        case CELL_BLUR_ALL: {\n            return {\n                mode: state.mode,\n                referenceNodeId: null,\n            };\n        }\n        case SET_DISPLAY_MODE:\n            return {\n                mode: action.mode,\n                referenceNodeId: action.referenceNodeId || state.referenceNodeId,\n            };\n        default:\n            return state;\n    }\n};\n//# sourceMappingURL=index.js.map","import { CELL_FOCUS, CELL_BLUR, CELL_BLUR_ALL } from '../../actions/cell';\nexport var focus = function (state, action) {\n    if (state === void 0) { state = null; }\n    switch (action.type) {\n        case CELL_FOCUS: {\n            return {\n                nodeId: action.id,\n                source: action.source,\n                scrollToCell: action.scrollToCell ? new Date().getTime() : null,\n            };\n        }\n        case CELL_BLUR_ALL:\n            return null;\n        case CELL_BLUR:\n            return action.id === (state === null || state === void 0 ? void 0 : state.nodeId) ? null : state;\n        default:\n            return state;\n    }\n};\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { SET_LANG } from '../../actions/setting';\nexport var settings = function (state, action) {\n    if (state === void 0) { state = {\n        lang: null,\n    }; }\n    switch (action.type) {\n        case SET_LANG:\n            return __assign(__assign({}, state), { lang: action.lang });\n        default:\n            return state;\n    }\n};\n//# sourceMappingURL=index.js.map","import { CELL_DRAG_HOVER, CLEAR_CLEAR_HOVER, } from '../../actions/cell';\nexport var hover = function (state, action) {\n    if (state === void 0) { state = null; }\n    switch (action.type) {\n        case CELL_DRAG_HOVER: {\n            return {\n                nodeId: action.hoverId,\n                position: action.position,\n            };\n        }\n        case CLEAR_CLEAR_HOVER:\n            return null;\n        default:\n            return state;\n    }\n};\n//# sourceMappingURL=index.js.map","\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = undoable;\n\nvar debug = _interopRequireWildcard(require(\"./debug\"));\n\nvar _actions = require(\"./actions\");\n\nvar _helpers = require(\"./helpers\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction createHistory(state, ignoreInitialState) {\n  // ignoreInitialState essentially prevents the user from undoing to the\n  // beginning, in the case that the undoable reducer handles initialization\n  // in a way that can't be redone simply\n  var history = (0, _helpers.newHistory)([], state, []);\n\n  if (ignoreInitialState) {\n    history._latestUnfiltered = null;\n  }\n\n  return history;\n} // insert: insert `state` into history, which means adding the current state\n//         into `past`, setting the new `state` as `present` and erasing\n//         the `future`.\n\n\nfunction insert(history, state, limit, group) {\n  var lengthWithoutFuture = history.past.length + 1;\n  debug.log('inserting', state);\n  debug.log('new free: ', limit - lengthWithoutFuture);\n  var past = history.past,\n      _latestUnfiltered = history._latestUnfiltered;\n  var isHistoryOverflow = limit && limit <= lengthWithoutFuture;\n  var pastSliced = past.slice(isHistoryOverflow ? 1 : 0);\n  var newPast = _latestUnfiltered != null ? [].concat(_toConsumableArray(pastSliced), [_latestUnfiltered]) : pastSliced;\n  return (0, _helpers.newHistory)(newPast, state, [], group);\n} // jumpToFuture: jump to requested index in future history\n\n\nfunction jumpToFuture(history, index) {\n  if (index < 0 || index >= history.future.length) return history;\n  var past = history.past,\n      future = history.future,\n      _latestUnfiltered = history._latestUnfiltered;\n  var newPast = [].concat(_toConsumableArray(past), [_latestUnfiltered], _toConsumableArray(future.slice(0, index)));\n  var newPresent = future[index];\n  var newFuture = future.slice(index + 1);\n  return (0, _helpers.newHistory)(newPast, newPresent, newFuture);\n} // jumpToPast: jump to requested index in past history\n\n\nfunction jumpToPast(history, index) {\n  if (index < 0 || index >= history.past.length) return history;\n  var past = history.past,\n      future = history.future,\n      _latestUnfiltered = history._latestUnfiltered;\n  var newPast = past.slice(0, index);\n  var newFuture = [].concat(_toConsumableArray(past.slice(index + 1)), [_latestUnfiltered], _toConsumableArray(future));\n  var newPresent = past[index];\n  return (0, _helpers.newHistory)(newPast, newPresent, newFuture);\n} // jump: jump n steps in the past or forward\n\n\nfunction jump(history, n) {\n  if (n > 0) return jumpToFuture(history, n - 1);\n  if (n < 0) return jumpToPast(history, history.past.length + n);\n  return history;\n} // helper to dynamically match in the reducer's switch-case\n\n\nfunction actionTypeAmongClearHistoryType(actionType, clearHistoryType) {\n  return clearHistoryType.indexOf(actionType) > -1 ? actionType : !actionType;\n} // redux-undo higher order reducer\n\n\nfunction undoable(reducer) {\n  var rawConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  debug.set(rawConfig.debug);\n\n  var config = _objectSpread({\n    limit: undefined,\n    filter: function filter() {\n      return true;\n    },\n    groupBy: function groupBy() {\n      return null;\n    },\n    undoType: _actions.ActionTypes.UNDO,\n    redoType: _actions.ActionTypes.REDO,\n    jumpToPastType: _actions.ActionTypes.JUMP_TO_PAST,\n    jumpToFutureType: _actions.ActionTypes.JUMP_TO_FUTURE,\n    jumpType: _actions.ActionTypes.JUMP,\n    neverSkipReducer: false,\n    ignoreInitialState: false,\n    syncFilter: false\n  }, rawConfig, {\n    initTypes: (0, _helpers.parseActions)(rawConfig.initTypes, ['@@redux-undo/INIT']),\n    clearHistoryType: (0, _helpers.parseActions)(rawConfig.clearHistoryType, [_actions.ActionTypes.CLEAR_HISTORY])\n  }); // Allows the user to call the reducer with redux-undo specific actions\n\n\n  var skipReducer = config.neverSkipReducer ? function (res, action) {\n    for (var _len = arguments.length, slices = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      slices[_key - 2] = arguments[_key];\n    }\n\n    return _objectSpread({}, res, {\n      present: reducer.apply(void 0, [res.present, action].concat(slices))\n    });\n  } : function (res) {\n    return res;\n  };\n  var initialState;\n  return function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    debug.start(action, state);\n    var history = state;\n\n    for (var _len2 = arguments.length, slices = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n      slices[_key2 - 2] = arguments[_key2];\n    }\n\n    if (!initialState) {\n      debug.log('history is uninitialized');\n\n      if (state === undefined) {\n        var createHistoryAction = {\n          type: '@@redux-undo/CREATE_HISTORY'\n        };\n        var start = reducer.apply(void 0, [state, createHistoryAction].concat(slices));\n        history = createHistory(start, config.ignoreInitialState);\n        debug.log('do not set initialState on probe actions');\n        debug.end(history);\n        return history;\n      } else if ((0, _helpers.isHistory)(state)) {\n        history = initialState = config.ignoreInitialState ? state : (0, _helpers.newHistory)(state.past, state.present, state.future);\n        debug.log('initialHistory initialized: initialState is a history', initialState);\n      } else {\n        history = initialState = createHistory(state, config.ignoreInitialState);\n        debug.log('initialHistory initialized: initialState is not a history', initialState);\n      }\n    }\n\n    var res;\n\n    switch (action.type) {\n      case undefined:\n        return history;\n\n      case config.undoType:\n        res = jump(history, -1);\n        debug.log('perform undo');\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      case config.redoType:\n        res = jump(history, 1);\n        debug.log('perform redo');\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      case config.jumpToPastType:\n        res = jumpToPast(history, action.index);\n        debug.log(\"perform jumpToPast to \".concat(action.index));\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      case config.jumpToFutureType:\n        res = jumpToFuture(history, action.index);\n        debug.log(\"perform jumpToFuture to \".concat(action.index));\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      case config.jumpType:\n        res = jump(history, action.index);\n        debug.log(\"perform jump to \".concat(action.index));\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      case actionTypeAmongClearHistoryType(action.type, config.clearHistoryType):\n        res = createHistory(history.present, config.ignoreInitialState);\n        debug.log('perform clearHistory');\n        debug.end(res);\n        return skipReducer.apply(void 0, [res, action].concat(slices));\n\n      default:\n        res = reducer.apply(void 0, [history.present, action].concat(slices));\n\n        if (config.initTypes.some(function (actionType) {\n          return actionType === action.type;\n        })) {\n          debug.log('reset history due to init action');\n          debug.end(initialState);\n          return initialState;\n        }\n\n        if (history._latestUnfiltered === res) {\n          // Don't handle this action. Do not call debug.end here,\n          // because this action should not produce side effects to the console\n          return history;\n        }\n        /* eslint-disable-next-line no-case-declarations */\n\n\n        var filtered = typeof config.filter === 'function' && !config.filter(action, res, history);\n\n        if (filtered) {\n          // if filtering an action, merely update the present\n          var filteredState = (0, _helpers.newHistory)(history.past, res, history.future, history.group);\n\n          if (!config.syncFilter) {\n            filteredState._latestUnfiltered = history._latestUnfiltered;\n          }\n\n          debug.log('filter ignored action, not storing it in past');\n          debug.end(filteredState);\n          return filteredState;\n        }\n        /* eslint-disable-next-line no-case-declarations */\n\n\n        var group = config.groupBy(action, res, history);\n\n        if (group != null && group === history.group) {\n          // if grouping with the previous action, only update the present\n          var groupedState = (0, _helpers.newHistory)(history.past, res, history.future, history.group);\n          debug.log('groupBy grouped the action with the previous action');\n          debug.end(groupedState);\n          return groupedState;\n        } // If the action wasn't filtered or grouped, insert normally\n\n\n        history = insert(history, res, config.limit, group);\n        debug.log('inserted new state into history');\n        debug.end(history);\n        return history;\n    }\n  };\n}","/**\n * @module src/editor/actions/cell/drag\n */\nimport { PositionEnum } from '../../const';\nexport var CELL_DRAG_HOVER = 'CELL_DRAG_HOVER';\nexport var CELL_DRAG = 'CELL_DRAG';\nexport var CELL_DRAG_CANCEL = 'CELL_DRAG_CANCEL';\nexport var CLEAR_CLEAR_HOVER = 'CLEAR_CLEAR_HOVER';\n/**\n * Creates a redux action for when a cell hovers another item.\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHover(drag, hover, level, position))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @param {number} level Set the level if the dragged cells should hover over an ancestor of hover.\n * @param {string} position Can be left, right, above, below.\n * @return {Action}\n */\nexport var cellHover = function (drag, hover, level, position) {\n    var _a;\n    if (level === void 0) { level = 0; }\n    var hoverId = level === 0\n        ? hover.id\n        : (_a = hover.ancestorIds[Math.max(0, level - 1)]) !== null && _a !== void 0 ? _a : hover.id;\n    return {\n        type: CELL_DRAG_HOVER,\n        ts: new Date(),\n        dragId: drag.id,\n        hoverId: hoverId,\n        level: level,\n        position: position,\n    };\n};\n/**\n * Creates a redux action for when a cell is hovering another cell on the left.\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverLeftOf(drag, hover, level))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @param {number} level Set the level if the dragged cells should hover over an ancestor of hover.\n * @return {Action}\n */\nexport var cellHoverLeftOf = function (drag, hover, level) { return cellHover(drag, hover, level, PositionEnum.LEFT_OF); };\n/**\n * Creates a redux action for when a cell is hovering another cell on the right.\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverRightOf(drag, hover, level))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @param {number} level Set the level if the dragged cells should hover over an ancestor of hover.\n * @return {Action}\n */\nexport var cellHoverRightOf = function (drag, hover, level) { return cellHover(drag, hover, level, PositionEnum.RIGHT_OF); };\n/**\n * Creates a redux action for when a cell is hovering another cell above.\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverAbove(drag, hover, level))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @param {number} level Set the level if the dragged cells should hover over an ancestor of hover.\n * @return {Action}\n */\nexport var cellHoverAbove = function (drag, hover, level) { return cellHover(drag, hover, level, PositionEnum.ABOVE); };\n/**\n * Creates a redux action for when a cell is hovering another cell below.\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverBelow(drag, hover, level))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @param {number} level Set the level if the dragged cells should hover over an ancestor of hover.\n * @return {Action}\n */\nexport var cellHoverBelow = function (drag, hover, level) { return cellHover(drag, hover, level, PositionEnum.BELOW); };\n/**\n * Creates a redux action for when a cell is hovering another cell on the left, but inline (css floating).\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverInlineLeft(drag, hover))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @return {Action}\n */\nexport var cellHoverInlineLeft = function (drag, hover) {\n    return cellHover(drag, hover, 0, PositionEnum.INLINE_LEFT);\n};\n/**\n * Creates a redux action for when a cell is hovering another cell on the right, but inline (css floating).\n *\n * @example\n * // const store = redux.createStore()\n * store.dispatch(cellHoverInlineRight(drag, hover))\n *\n * @param {PartialCell} drag The cell that is currently being dragged.\n * @param {Cell} hover The cell that is being hovered by the dragged cell.\n * @return {Action}\n */\nexport var cellHoverInlineRight = function (drag, hover) {\n    return cellHover(drag, hover, 0, PositionEnum.INLINE_RIGHT);\n};\n/**\n * Creates a redux action for when a cell is being dragged.\n *\n * @example\n * // const store = redux.createStore()\n * // const cell = { id: '1', ... }\n * store.dispatch(dragCell(cell.id))\n *\n * @param {string} id The id of the cell that is being dragged.\n * @return {Action}\n */\nexport var dragCell = function (id) { return ({\n    type: CELL_DRAG,\n    ts: new Date(),\n    id: id,\n}); };\n/**\n * Creates a redux action to clear hover state of all cells.\n *\n * @return {Action}\n */\nexport var clearHover = function () { return ({\n    type: CLEAR_CLEAR_HOVER,\n    ts: new Date(),\n}); };\n/**\n * Creates a redux action for when cell dragging ends.\n *\n * @example\n * // const store = redux.createStore()\n * // const cell = { id: '1', ... }\n * store.dispatch(cancelCellDrag(cell.id))\n *\n * @param {string} id\n * @return {Action}\n */\nexport var cancelCellDrag = function () { return ({\n    type: CELL_DRAG_CANCEL,\n    ts: new Date(),\n}); };\nexport var dragActions = {\n    cancelCellDrag: cancelCellDrag,\n    clearHover: clearHover,\n    dragCell: dragCell,\n    cellHoverInlineRight: cellHoverInlineRight,\n    cellHoverInlineLeft: cellHoverInlineLeft,\n    cellHoverBelow: cellHoverBelow,\n    cellHoverAbove: cellHoverAbove,\n    cellHoverRightOf: cellHoverRightOf,\n    cellHoverLeftOf: cellHoverLeftOf,\n    cellHover: cellHover,\n};\n//# sourceMappingURL=drag.js.map"],"sourceRoot":""}