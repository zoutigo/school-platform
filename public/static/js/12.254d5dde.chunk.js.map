{"version":3,"sources":["../../../src/hooks/useCurrentNodeWithPlugin.ts","../../../src/hooks/useRemovePlugin.ts","../../../src/utils/getCurrentData.ts","../../../src/hooks/useAddPlugin.ts","../node_modules/@material-ui/icons/Done.js","../../../src/hooks/useCurrentNodeDataWithPlugin.ts","../../../../src/pluginFactories/components/UniformsControls.tsx","../../../src/components/ConditionalWrapper.tsx","../../../src/components/ToolbarButton.tsx","../../../src/components/PluginButton.tsx","../../../src/hooks/usePluginIsActive.ts","../../../src/hooks/usePluginIsDisabled.ts","../../../src/components/Controls.tsx"],"names":["plugin","pluginType","_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","props","e"],"mappings":"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","file":"static/js/12.254d5dde.chunk.js","sourcesContent":["var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { Editor } from 'slate';\nimport { useSlate } from 'slate-react';\nexport var getCurrentNodeWithPlugin = function (editor, plugin) {\n    if (plugin.pluginType === 'custom') {\n        return null;\n    }\n    var match = plugin.pluginType === 'component'\n        ? plugin.object === 'mark'\n            ? function (elem) { return Boolean(elem[plugin.type]); }\n            : function (elem) { return elem.type === plugin.type; }\n        : plugin.pluginType === 'data'\n            ? // search for data\n                function (_a) {\n                    var data = _a.data;\n                    var matches = plugin.dataMatches(data);\n                    return matches;\n                }\n            : null;\n    try {\n        var _a = __read(Editor.nodes(editor, {\n            match: match,\n            mode: 'lowest',\n        }), 1), matchingNode = _a[0];\n        return matchingNode;\n    }\n    catch (e) {\n        // seems to crash sometimes on redu\n        return null;\n    }\n};\nexport default (function (plugin) {\n    var editor = useSlate();\n    return getCurrentNodeWithPlugin(editor, plugin);\n});\n//# sourceMappingURL=useCurrentNodeWithPlugin.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useCallback } from 'react';\nimport { Transforms } from 'slate';\nimport { useSlate } from 'slate-react';\nimport getCurrentData from '../utils/getCurrentData';\nexport var removePlugin = function (editor, plugin) {\n    if (plugin.customRemove) {\n        plugin.customRemove(editor);\n    }\n    else if (plugin.pluginType === 'component') {\n        if (plugin.object === 'mark') {\n            editor.removeMark(plugin.type);\n        }\n        else if (plugin.object === 'inline') {\n            Transforms.unwrapNodes(editor, {\n                match: function (elem) { return elem.type === plugin.type; },\n            });\n            // Transforms.setNodes(editor, { type: null });\n        }\n        else if (plugin.object === 'block') {\n            if (plugin.replaceWithDefaultOnRemove) {\n                Transforms.setNodes(editor, {\n                    type: null,\n                });\n            }\n            else {\n                Transforms.unwrapNodes(editor, {\n                    match: function (elem) { return elem.type === plugin.type; },\n                    split: true,\n                });\n            }\n        }\n    }\n    else if (plugin.pluginType === 'data') {\n        if (!plugin.properties) {\n            // can't be removed\n        }\n        else {\n            var existingData_1 = getCurrentData(editor);\n            var dataWithout = Object.keys(existingData_1).reduce(function (acc, key) {\n                var _a;\n                if (plugin.properties.includes(key)) {\n                    return acc;\n                }\n                return __assign(__assign({}, acc), (_a = {}, _a[key] = existingData_1[key], _a));\n            }, {});\n            Transforms.setNodes(editor, {\n                data: dataWithout,\n            });\n        }\n    }\n};\nexport default (function (plugin) {\n    var editor = useSlate();\n    return useCallback(function () { return removePlugin(editor, plugin); }, []);\n});\n//# sourceMappingURL=useRemovePlugin.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { Editor } from 'slate';\nvar getCurrentData = function (editor) {\n    var _a;\n    var _b = __read(Editor.nodes(editor, {\n        mode: 'all',\n        match: function (node) {\n            return Boolean(node.data);\n        },\n    }), 1), existingNodeWithData = _b[0];\n    var existingData = existingNodeWithData\n        ? (_a = existingNodeWithData[0]) === null || _a === void 0 ? void 0 : _a.data\n        : {};\n    return existingData;\n};\nexport default getCurrentData;\n//# sourceMappingURL=getCurrentData.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useCallback } from 'react';\nimport { Transforms } from 'slate';\nimport { useSlate } from 'slate-react';\nimport { getCurrentNodeWithPlugin } from './useCurrentNodeWithPlugin';\nimport { removePlugin } from './useRemovePlugin';\nimport getCurrentData from '../utils/getCurrentData';\nexport var addPlugin = function (editor, plugin, props) {\n    var _a;\n    var _b = props || {}, passedData = _b.data, text = _b.text;\n    var currentNodeEntry = getCurrentNodeWithPlugin(editor, plugin);\n    if (text) {\n        var withExtraSpace = plugin.pluginType === 'component' &&\n            plugin.object === 'inline' &&\n            plugin.addExtraSpace;\n        var textToInsert = withExtraSpace ? text + ' ' : text;\n        editor.insertText(textToInsert);\n        Transforms.select(editor, {\n            anchor: editor.selection.anchor,\n            focus: __assign(__assign({}, editor.selection.focus), { offset: editor.selection.focus.offset - textToInsert.length }),\n        });\n    }\n    var data = passedData || (plugin.getInitialData ? plugin.getInitialData() : null);\n    var isActive = Boolean(currentNodeEntry);\n    if (isActive) {\n        Transforms.select(editor, currentNodeEntry[1]);\n        removePlugin(editor, plugin);\n    }\n    // add new\n    if (plugin.customAdd) {\n        plugin.customAdd(editor);\n    }\n    else if (plugin.pluginType === 'component') {\n        if (plugin.object === 'mark') {\n            editor.addMark(plugin.type, data || true);\n        }\n        else {\n            if (plugin.object === 'block' && plugin.replaceWithDefaultOnRemove) {\n                Transforms.setNodes(editor, { type: plugin.type, data: data });\n            }\n            else {\n                Transforms.wrapNodes(editor, {\n                    type: plugin.type,\n                    children: [],\n                    data: data,\n                }, { split: true });\n                // workaround for inline problems in slate\n                if (plugin.object === 'inline' &&\n                    plugin.addExtraSpace &&\n                    !text &&\n                    editor.selection) {\n                    var focus_1 = __assign({}, editor.selection.focus);\n                    Transforms.insertText(editor, ' ', {\n                        at: editor.selection.focus,\n                    });\n                    Transforms.select(editor, focus_1);\n                }\n            }\n        }\n    }\n    else if (plugin.pluginType === 'data') {\n        var existingData = (_a = getCurrentData(editor)) !== null && _a !== void 0 ? _a : {};\n        Transforms.setNodes(editor, {\n            data: __assign(__assign({}, existingData), (data !== null && data !== void 0 ? data : {})),\n        });\n    }\n};\nexport default (function (plugin) {\n    var editor = useSlate();\n    return useCallback(function (props) { return addPlugin(editor, plugin, props); }, []);\n});\n//# sourceMappingURL=useAddPlugin.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\"\n}), 'Done');\n\nexports.default = _default;","import { useSlate } from 'slate-react';\nimport { getCurrentNodeWithPlugin } from './useCurrentNodeWithPlugin';\nexport var getCurrentNodeDataWithPlugin = function (editor, plugin) {\n    var currentNodeEntry = getCurrentNodeWithPlugin(editor, plugin);\n    if (currentNodeEntry) {\n        var currentNode = currentNodeEntry[0];\n        if (plugin.pluginType === 'component' && plugin.object === 'mark') {\n            return currentNode[plugin.type];\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var data = currentNode.data;\n        return data;\n    }\n    else if (plugin.getInitialData) {\n        return plugin.getInitialData();\n    }\n    else {\n        return {};\n    }\n};\nexport default (function (plugin) {\n    var editor = useSlate();\n    return getCurrentNodeDataWithPlugin(editor, plugin);\n});\n//# sourceMappingURL=useCurrentNodeDataWithPlugin.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { Dialog, DialogActions, DialogContent } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport DoneIcon from '@material-ui/icons/Done';\nimport { makeUniformsSchema, AutoForm, AutoFields } from '@react-page/editor';\nimport React, { useCallback, useRef, useState } from 'react';\nfunction Controls(props) {\n    var uniformsSchema = props.schema\n        ? makeUniformsSchema(props.schema)\n        : null;\n    var hasSchema = Boolean(props.schema);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var formRef = useRef();\n    var _a = __read(useState(null), 2), text = _a[0], setText = _a[1];\n    var onCancel = function () {\n        props.close();\n    };\n    var saveAndCloseWithData = useCallback(function (data) {\n        props.close();\n        if (props.shouldInsertWithText) {\n            props.add({ text: text, data: data });\n        }\n        else {\n            props.add({ data: data });\n        }\n    }, [props.shouldInsertWithText, text]);\n    var submitForm = useCallback(function () {\n        if (formRef.current) {\n            formRef.current.submit();\n        }\n    }, [formRef.current]);\n    var onOkClick = useCallback(function () {\n        if (uniformsSchema) {\n            submitForm();\n        }\n        else {\n            saveAndCloseWithData({});\n        }\n    }, [submitForm, saveAndCloseWithData, hasSchema]);\n    var onRemove = function () {\n        props.remove();\n        props.close();\n    };\n    return (React.createElement(Dialog, { disableEnforceFocus: true, PaperProps: {\n            style: { minWidth: 300 },\n        }, open: props.open },\n        React.createElement(DialogContent, null,\n            !props.shouldInsertWithText ? null : (React.createElement(\"div\", null,\n                React.createElement(TextField, { autoFocus: true, placeholder: 'Text', onChange: function (e) { return setText(e.target.value); }, value: text }))),\n            hasSchema ? (React.createElement(AutoForm, { ref: formRef, model: props.data, schema: uniformsSchema, onSubmit: saveAndCloseWithData },\n                React.createElement(AutoFields, null))) : null),\n        React.createElement(DialogActions, null,\n            React.createElement(Button, { variant: \"text\", onClick: onCancel, style: { marginRight: 'auto' } }, props.cancelLabel || 'Cancel'),\n            props.isActive ? (React.createElement(Button, { variant: \"contained\", color: \"secondary\", onClick: onRemove },\n                props.removeLabel || 'Remove',\n                React.createElement(DeleteIcon, { style: { marginLeft: 10 } }))) : null,\n            React.createElement(Button, { variant: \"contained\", color: \"primary\", onClick: onOkClick },\n                props.submitLabel || 'Ok',\n                React.createElement(DoneIcon, { style: { marginLeft: 10 } })))));\n}\nexport default Controls;\n//# sourceMappingURL=UniformsControls.js.map","export var ConditionalWrapper = function (_a) {\n    var condition = _a.condition, wrapper = _a.wrapper, children = _a.children;\n    return condition ? wrapper(children) : children;\n};\n//# sourceMappingURL=ConditionalWrapper.js.map","import { lazyLoad } from '@react-page/editor';\nimport React from 'react';\nimport { ConditionalWrapper } from './ConditionalWrapper';\nvar IconButton = lazyLoad(function () { return import('@material-ui/core/IconButton'); });\nvar Tooltip = lazyLoad(function () { return import('@material-ui/core/Tooltip'); });\nvar ToolbarButton = function (_a) {\n    var icon = _a.icon, isActive = _a.isActive, onClick = _a.onClick, _b = _a.disabled, disabled = _b === void 0 ? false : _b, _c = _a.toolTip, toolTip = _c === void 0 ? '' : _c;\n    return (React.createElement(ConditionalWrapper, { condition: !disabled, wrapper: function (children) { return React.createElement(Tooltip, { title: toolTip }, children); } },\n        React.createElement(IconButton, { onMouseDown: onClick, style: isActive\n                ? { color: 'rgb(0, 188, 212)' }\n                : disabled\n                    ? { color: 'gray' }\n                    : { color: 'white' }, disabled: disabled }, icon)));\n};\nexport default React.memo(ToolbarButton);\n//# sourceMappingURL=ToolbarButton.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { Range, Transforms } from 'slate';\nimport { useSlate } from 'slate-react';\nimport useAddPlugin from '../hooks/useAddPlugin';\nimport { getCurrentNodeDataWithPlugin } from '../hooks/useCurrentNodeDataWithPlugin';\nimport usePluginIsActive from '../hooks/usePluginIsActive';\nimport usePluginIsDisabled from '../hooks/usePluginIsDisabled';\nimport useRemovePlugin from '../hooks/useRemovePlugin';\nimport UniformsControls from '../pluginFactories/components/UniformsControls';\nimport { useSetDialogIsVisible } from './DialogVisibleProvider';\nimport ToolbarButton from './ToolbarButton';\nimport { useUiTranslator } from '@react-page/editor';\nfunction PluginButton(props) {\n    var _a, _b, _c, _d, _e;\n    var plugin = props.plugin;\n    var t = useUiTranslator().t;\n    var hasControls = Boolean(plugin.controls);\n    var _f = __read(useState(false), 2), showControls = _f[0], setShowControls = _f[1];\n    var storedPropsRef = useRef();\n    var shouldInsertWithText = plugin.pluginType === 'component' &&\n        plugin.object === 'inline' &&\n        (!((_a = storedPropsRef === null || storedPropsRef === void 0 ? void 0 : storedPropsRef.current) === null || _a === void 0 ? void 0 : _a.selection) ||\n            Range.isCollapsed((_b = storedPropsRef === null || storedPropsRef === void 0 ? void 0 : storedPropsRef.current) === null || _b === void 0 ? void 0 : _b.selection)) &&\n        !((_c = storedPropsRef === null || storedPropsRef === void 0 ? void 0 : storedPropsRef.current) === null || _c === void 0 ? void 0 : _c.isActive);\n    var close = useCallback(function () { return setShowControls(false); }, []);\n    var isActive = usePluginIsActive(plugin);\n    var add = useAddPlugin(plugin);\n    var remove = useRemovePlugin(plugin);\n    var editor = useSlate();\n    var setIsVisible = useSetDialogIsVisible();\n    useEffect(function () { return setIsVisible(showControls); }, [showControls, setIsVisible]);\n    var onClick = React.useCallback(function (e) {\n        e.preventDefault();\n        if (hasControls || shouldInsertWithText) {\n            if (!showControls) {\n                // store props\n                storedPropsRef.current = {\n                    selection: editor.selection,\n                    isActive: isActive,\n                    data: getCurrentNodeDataWithPlugin(editor, plugin),\n                };\n            }\n            setShowControls(!showControls);\n        }\n        else {\n            if (isActive) {\n                remove();\n            }\n            else {\n                add();\n            }\n        }\n    }, [isActive, hasControls, showControls, shouldInsertWithText]);\n    var controls = plugin.controls;\n    var Controls = controls\n        ? controls.type === 'autoform'\n            ? function (props) { return React.createElement(UniformsControls, __assign({}, props, { schema: controls === null || controls === void 0 ? void 0 : controls.schema })); }\n            : controls.Component\n        : UniformsControls;\n    var isDisabled = usePluginIsDisabled(plugin);\n    return (React.createElement(React.Fragment, null,\n        React.createElement(ToolbarButton, { onClick: onClick, disabled: isDisabled, isActive: isActive, icon: plugin.icon ||\n                (plugin.pluginType === 'component' && plugin.deserialize.tagName), toolTip: t(plugin.label) }),\n        hasControls || shouldInsertWithText ? (React.createElement(Controls, __assign({ pluginConfig: plugin, close: close, open: showControls, add: function (p) {\n                var _a;\n                if ((_a = storedPropsRef === null || storedPropsRef === void 0 ? void 0 : storedPropsRef.current) === null || _a === void 0 ? void 0 : _a.selection) {\n                    // restore selection before adding\n                    Transforms.select(editor, storedPropsRef === null || storedPropsRef === void 0 ? void 0 : storedPropsRef.current.selection);\n                }\n                add(p);\n            }, remove: function () {\n                var _a;\n                if ((_a = storedPropsRef === null || storedPropsRef === void 0 ? void 0 : storedPropsRef.current) === null || _a === void 0 ? void 0 : _a.selection) {\n                    // restore selection before removing\n                    Transforms.select(editor, storedPropsRef === null || storedPropsRef === void 0 ? void 0 : storedPropsRef.current.selection);\n                }\n                remove();\n            }, isActive: (_d = storedPropsRef === null || storedPropsRef === void 0 ? void 0 : storedPropsRef.current) === null || _d === void 0 ? void 0 : _d.isActive, shouldInsertWithText: shouldInsertWithText, data: (_e = storedPropsRef === null || storedPropsRef === void 0 ? void 0 : storedPropsRef.current) === null || _e === void 0 ? void 0 : _e.data }, props))) : null));\n}\nexport default React.memo(PluginButton);\n//# sourceMappingURL=PluginButton.js.map","import useCurrentNodeWithPlugin from './useCurrentNodeWithPlugin';\nexport default (function (plugin) {\n    var nodeEntry = useCurrentNodeWithPlugin(plugin);\n    return Boolean(nodeEntry);\n});\n//# sourceMappingURL=usePluginIsActive.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { useState } from 'react';\nimport { useSlate } from 'slate-react';\nexport default (function (plugin) {\n    try {\n        var editor = useSlate();\n        var _a = __read(useState(true), 2), disabled = _a[0], setDisabled_1 = _a[1];\n        if (!editor) {\n            return true;\n        }\n        if (plugin.isDisabled) {\n            plugin.isDisabled(editor).then(function (d) { return setDisabled_1(d); });\n            return disabled;\n        }\n        else {\n            return false;\n        }\n    }\n    catch (e) {\n        // slate sometimes throws when dom node cant be found in undo\n        return false;\n    }\n});\n//# sourceMappingURL=usePluginIsDisabled.js.map","import React from 'react';\nimport PluginButton from './PluginButton';\nvar Controls = function (props) {\n    var plugins = props.plugins, translations = props.translations;\n    return (React.createElement(\"div\", null, plugins &&\n        plugins.map(function (plugin, i) {\n            return plugin.addToolbarButton ? (React.createElement(PluginButton, { key: i, translations: translations, plugin: plugin })) : null;\n        })));\n};\nexport default React.memo(Controls);\n//# sourceMappingURL=Controls.js.map"],"sourceRoot":""}